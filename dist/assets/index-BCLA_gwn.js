import{j as o,S as Qt,C as mt,a as Yt,M as Zt,b as er,c as tr,B as Ke,d as $e,e as rr,L as sr,f as Ge,g as nr,h as or,i as ar,R as ir,P as lr,k as cr,l as dr,D as ur,U as fr}from"./ui-vendor-DLIETD8h.js";import{a as hr,r as E,u as pt,R as gt,b as mr,N as xt,d as pr,e as gr}from"./router-vendor-CH3waO4e.js";import{c as xr}from"./state-vendor-DCm6xtTh.js";(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))s(n);new MutationObserver(n=>{for(const a of n)if(a.type==="childList")for(const i of a.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&s(i)}).observe(document,{childList:!0,subtree:!0});function r(n){const a={};return n.integrity&&(a.integrity=n.integrity),n.referrerPolicy&&(a.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?a.credentials="include":n.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function s(n){if(n.ep)return;n.ep=!0;const a=r(n);fetch(n.href,a)}})();var bt,Xe=hr;bt=Xe.createRoot,Xe.hydrateRoot;const xe={primaryColor:"#3b82f6",secondaryColor:"#8b5cf6",textColor:"#1f2937",backgroundColor:"#ffffff",borderColor:"#e5e7eb",fontSize:"16px",fontWeight:"400",animationEnabled:!0,animationDuration:"300ms"},Qe={primaryColor:"#60a5fa",secondaryColor:"#a78bfa",textColor:"#f9fafb",backgroundColor:"#111827",borderColor:"#4b5563",fontSize:"16px",fontWeight:"400",animationEnabled:!0,animationDuration:"300ms"},_=xr()(e=>({agents:[],selectedAgentId:null,searchQuery:"",collapsedGroups:new Set,chats:{},userSettings:{sidebarCollapsed:!1,sidebarWidth:280,theme:"light",themeConfig:xe,language:"zh-CN",notifications:!0},theme:"light",themeConfig:xe,globalStatus:"online",setAgents:t=>e({agents:t}),setSelectedAgentId:t=>e({selectedAgentId:t}),setSearchQuery:t=>e({searchQuery:t}),toggleGroup:t=>e(r=>{const s=new Set(r.collapsedGroups);return s.has(t)?s.delete(t):s.add(t),{collapsedGroups:s}}),addMessage:(t,r)=>{let s="";return e(n=>{s=`${t}-${Date.now()}-${Math.random()}`;const a={id:s,timestamp:new Date().toISOString(),...r},i=n.chats[t]||{messages:[],isTyping:!1};return{chats:{...n.chats,[t]:{...i,messages:[...i.messages,a]}}}}),s},updateMessageContent:(t,r,s,n=!1)=>e(a=>{const i=a.chats[t];if(!i)return a;const l=i.messages.map(h=>h.id===r?{...h,content:s,isStreaming:n}:h);return{chats:{...a.chats,[t]:{...i,messages:l}}}}),removeLastAiMessage:t=>{let r=null;return e(s=>{const n=s.chats[t];if(!n||n.messages.length===0)return s;const a=[...n.messages];for(let i=a.length-1;i>=0;i--)if(!a[i].isUser){r=a[i].content,a.splice(i,1);break}return{chats:{...s.chats,[t]:{...n,messages:a}}}}),r},setTyping:(t,r)=>e(s=>{const n=s.chats[t]||{messages:[],isTyping:!1};return{chats:{...s.chats,[t]:{...n,isTyping:r}}}}),updateUserSettings:t=>e(r=>({userSettings:{...r.userSettings,...t}})),setTheme:t=>e(r=>({theme:t,themeConfig:t==="dark"?Qe:xe,userSettings:{...r.userSettings,theme:t,themeConfig:t==="dark"?Qe:xe}})),setThemeConfig:t=>e(r=>({themeConfig:{...r.themeConfig,...t},userSettings:{...r.userSettings,themeConfig:{...r.userSettings.themeConfig,...t}}})),toggleSidebar:()=>e(t=>({userSettings:{...t.userSettings,sidebarCollapsed:!t.userSettings.sidebarCollapsed}})),setSidebarWidth:t=>e(r=>({userSettings:{...r.userSettings,sidebarWidth:t}})),setGlobalStatus:t=>e({globalStatus:t}),toggleGlobalStatus:()=>e(t=>({globalStatus:t.globalStatus==="online"?"offline":"online"}))})),br=({children:e})=>{const{userSettings:t,toggleSidebar:r,setSidebarWidth:s,theme:n}=_(),[a,i]=E.useState(!1),[l,h]=E.useState(!1),u=E.useRef(null),d=E.useRef(null),b=200,x=500,j=60,f=y=>{t.sidebarCollapsed||(i(!0),h(!0),y.preventDefault())},p=y=>{if(!a||!u.current)return;const S=u.current.getBoundingClientRect(),O=y.clientX-S.left,R=Math.max(b,Math.min(x,O));s(R)},m=()=>{a&&(i(!1),h(!1))};E.useEffect(()=>(a?(document.addEventListener("mousemove",p),document.addEventListener("mouseup",m),document.body.style.cursor="col-resize",document.body.style.userSelect="none"):(document.removeEventListener("mousemove",p),document.removeEventListener("mouseup",m),document.body.style.cursor="",document.body.style.userSelect=""),()=>{document.removeEventListener("mousemove",p),document.removeEventListener("mouseup",m),document.body.style.cursor="",document.body.style.userSelect=""}),[a]);const g=()=>{r()},v=()=>{let y="sidebar flex flex-col relative";return n==="dark"?y+=" bg-gray-800 border-r border-gray-700":y+=" bg-white border-r border-gray-300",t.sidebarCollapsed&&(y+=" sidebar-collapsed"),y},k={width:t.sidebarCollapsed?j:`${t.sidebarWidth}px`,transition:a?"none":"width 0.3s ease"};return o.jsxs("aside",{ref:u,className:v(),style:k,children:[e,o.jsx("div",{className:"sidebar-toggle",onClick:g,title:t.sidebarCollapsed?"展开侧边栏":"收起侧边栏",style:{position:"absolute",right:"-6px",top:"33.33%",width:"12px",height:"40px",background:"linear-gradient(135deg, #4b5563, #6b7280)",border:"1px solid #374151",borderRadius:"6px",cursor:"pointer",transition:"all 0.3s cubic-bezier(0.4, 0, 0.2, 1)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:10,boxShadow:"0 2px 8px rgba(0, 0, 0, 0.2)"},onMouseEnter:y=>{t.sidebarCollapsed||(y.currentTarget.style.width="16px",y.currentTarget.style.height="60px",y.currentTarget.style.right="-8px",y.currentTarget.style.background="linear-gradient(135deg, #6b7280, #9ca3af)",y.currentTarget.style.boxShadow="0 4px 12px rgba(0, 0, 0, 0.3)")},onMouseLeave:y=>{t.sidebarCollapsed||(y.currentTarget.style.width="12px",y.currentTarget.style.height="40px",y.currentTarget.style.right="-6px",y.currentTarget.style.background="linear-gradient(135deg, #4b5563, #6b7280)",y.currentTarget.style.boxShadow="0 2px 8px rgba(0, 0, 0, 0.2)")},children:o.jsx("div",{style:{width:"4px",height:"16px",background:"linear-gradient(to bottom, #d1d5db, #9ca3af)",borderRadius:"2px",transition:"all 0.3s ease",transform:t.sidebarCollapsed?"rotate(180deg)":"rotate(0deg)"}})}),o.jsx("div",{ref:d,className:`sidebar-resize-handle ${l?"dragging":""}`,onMouseDown:f,title:"拖拽调整宽度",style:{position:"absolute",right:0,top:0,bottom:0,width:"4px",cursor:"col-resize",background:"transparent",transition:"background 0.2s ease",zIndex:5},onMouseEnter:y=>{t.sidebarCollapsed||(y.currentTarget.style.background="#3b82f6")},onMouseLeave:y=>{l||(y.currentTarget.style.background="transparent")}})]})},yr=({onSearchChange:e,onClear:t,searchQuery:r})=>{const{theme:s}=_(),[n,a]=E.useState(r),[i,l]=E.useState(!1);E.useEffect(()=>{a(r),l(r.trim()!=="")},[r]);const h=x=>{const j=x.target.value;a(j),l(j.trim()!==""),e(j)},u=()=>{a(""),l(!1),t()},d=()=>{let x="w-full rounded-lg px-4 py-2 pl-10 pr-10 focus:outline-none focus:ring-2 focus:ring-blue-500 placeholder-gray-400 transition-all duration-200";return s==="dark"?x+=" bg-gray-700 text-white border border-gray-600":x+=" bg-gray-100 text-gray-900 border border-gray-200",x},b=()=>{let x="search-container p-4 border-b";return s==="dark"?x+=" border-gray-700":x+=" border-gray-200",x};return o.jsx("div",{className:b(),children:o.jsxs("div",{className:"relative",children:[o.jsx("input",{type:"text",id:"searchInput",placeholder:"搜索智能体...",value:n,onChange:h,className:d(),"aria-label":"搜索智能体",autoComplete:"off"}),o.jsx(Qt,{className:"absolute left-3 top-2.5 w-5 h-5 text-gray-400"}),i&&o.jsx("button",{id:"searchClearBtn",onClick:u,className:`search-clear-btn ${i?"visible":""}`,title:"清空搜索","aria-label":"清空搜索",style:{position:"absolute",right:"10px",top:"50%",transform:"translateY(-50%)",width:"20px",height:"20px",borderRadius:"50%",background:s==="dark"?"#4b5563":"#e5e7eb",border:"none",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",opacity:i?"1":"0",visibility:i?"visible":"hidden",transition:"all 0.2s ease",padding:"0"},onMouseEnter:x=>{x.currentTarget.style.background=s==="dark"?"#6b7280":"#d1d5db"},onMouseLeave:x=>{x.currentTarget.style.background=s==="dark"?"#4b5563":"#e5e7eb"},children:o.jsx("svg",{fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",style:{width:"12px",height:"12px",color:s==="dark"?"#9ca3af":"#6b7280"},children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]})})},wr=({groupName:e,children:t})=>{const{collapsedGroups:r,toggleGroup:s,theme:n}=_(),a=r.has(e),i=()=>{s(e)},l=()=>{let h="group-header px-4 py-3 cursor-pointer flex items-center justify-between group relative rounded-lg transition-all duration-300 hover:shadow-md border";return n==="dark"?h+=" bg-gradient-to-r from-gray-700/50 to-gray-800/50 hover:from-gray-600/60 hover:to-gray-700/60 border-gray-600/30":h+=" bg-gradient-to-r from-gray-100 to-gray-200/50 hover:from-gray-200 hover:to-gray-300/50 border-gray-300/50",h};return o.jsxs("div",{className:"mb-2",children:[o.jsx("div",{className:l(),onClick:i,children:o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx(mt,{className:`w-5 h-5 transition-transform duration-300 ease-in-out ${a?"-rotate-90":""} ${n==="dark"?"text-gray-300":"text-gray-500"}`}),o.jsx("span",{className:`text-sm font-semibold ${n==="dark"?"text-white":"text-gray-800"}`,children:e})]})}),!a&&o.jsx("div",{className:"space-y-1",children:t})]})},jr=({agent:e,searchQuery:t,onClick:r})=>{const{selectedAgentId:s,setSelectedAgentId:n,theme:a,globalStatus:i}=_(),l=s===e.id,[h,u]=E.useState(!1),d=()=>{r?r():n(e.id)},b=()=>{u(!0)},x=()=>{u(!1)},j=(M,J)=>{if(!J)return M;const V=new RegExp(`(${f(J)})`,"gi");return M.split(V).map((F,ne)=>F.toLowerCase()===J.toLowerCase()?o.jsx("span",{className:"search-highlight",children:F},ne):F)},f=M=>M.replace(/[.*+?^${}()|[\]\\]/g,"\\$&"),p=E.useMemo(()=>{if(!t||t.trim()==="")return!0;const M=t.toLowerCase(),J=e.name.toLowerCase(),V=e.description.toLowerCase();return J.includes(M)||V.includes(M)},[t,e.name,e.description]),m={blue:"from-blue-400 to-blue-600",purple:"from-purple-400 to-purple-600",orange:"from-orange-400 to-orange-600"},g={blue:o.jsx("svg",{className:"w-7 h-7 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9.75 17L9 20l-1 1h8l-1-1-.75-3M3 13h18M5 17h14a2 2 0 002-2V5a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"})}),purple:o.jsx("svg",{className:"w-7 h-7 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10 20l4-16m4 4l4 4-4 4M6 16l-4-4 4-4"})}),orange:o.jsx("svg",{className:"w-7 h-7 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 012-2h2a2 2 0 012 2m-6 9l2 2 4-4"})})},v=i==="online"?"bg-green-500":"bg-red-500",y=(()=>{if(e.avatar){if(e.avatar==="avatar-1.png")return{color:"blue",icon:g.blue,gradient:m.blue};if(e.avatar==="avatar-2.png")return{color:"purple",icon:g.purple,gradient:m.purple};if(e.avatar==="avatar-3.png")return{color:"orange",icon:g.orange,gradient:m.orange}}return e.avatarColor?{color:e.avatarColor,icon:g[e.avatarColor],gradient:m[e.avatarColor]}:{color:"blue",icon:g.blue,gradient:m.blue}})(),S=h?"scale(1.08)":"scale(1)",O=()=>{let M="agent-item mx-2 px-3 py-2.5 rounded-xl cursor-pointer flex items-center gap-3 relative overflow-hidden";return a==="dark"?l?M+=" bg-blue-600/20 border border-blue-500/30 shadow-lg shadow-blue-500/20":h?M+=" bg-slate-700/50 border border-slate-600/30":M+=" border border-transparent hover:border-slate-600/20":l?M+=" bg-blue-50 border border-blue-300 shadow-lg shadow-blue-200/50":h?M+=" bg-gray-100 border border-gray-200":M+=" border border-transparent hover:border-gray-200",M},R="text-xs text-gray-400 truncate",U=i==="online"?"text-xs text-green-400":"text-xs text-red-400",W={transition:"all 0.2s cubic-bezier(0.4, 0, 0.2, 1)",transform:h?"translateX(4px)":"translateX(0)"};return p?o.jsxs("div",{className:O(),onClick:d,onMouseEnter:b,onMouseLeave:x,"data-agent-id":e.id,"data-agent-name":e.name,"data-agent-avatar":e.avatarColor,style:W,children:[o.jsxs("div",{className:"relative",children:[o.jsx("div",{className:`w-12 h-12 bg-gradient-to-br ${y.gradient} rounded-full flex items-center justify-center avatar-container relative z-10 transition-transform duration-200`,style:{transform:S,...l&&{boxShadow:a==="dark"?"0 0 20px rgba(59, 130, 246, 0.4)":"0 0 20px rgba(59, 130, 246, 0.3)"}},children:y.icon}),o.jsx("div",{className:`absolute bottom-0 right-0 w-3 h-3 ${v} rounded-full border-2 border-white z-20`})]}),o.jsxs("div",{className:"flex-1 min-w-0",children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("span",{className:`text-sm font-medium truncate transition-colors duration-200 ${l?a==="dark"?"text-blue-300":"text-blue-700":a==="dark"?"text-gray-200":"text-gray-700"}`,children:j(e.name,t)}),o.jsx("span",{className:`status-badge ${U} transition-all duration-200 ${h?"opacity-100":"opacity-80"}`,children:i==="online"?"在线":"离线"})]}),o.jsx("p",{className:R,children:j(e.description,t)})]})]}):null},Cr=()=>{const{setTheme:e,theme:t,globalStatus:r,toggleGlobalStatus:s}=_(),n=()=>{e(t==="light"?"dark":"light")},a=()=>{console.log("打开设置页面")},i=()=>{s()},l=r==="online"?"bg-green-500":"bg-red-500",h=r==="online"?"在线":"离线";return o.jsxs("div",{className:`p-4 border-t flex items-center justify-between ${t==="dark"?"border-slate-700":"border-gray-200"}`,children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsxs("button",{className:`flex items-center gap-2 px-3 py-2 rounded-lg transition-colors ${t==="dark"?"hover:bg-slate-700":"hover:bg-gray-200"}`,onClick:n,"aria-label":"切换主题",title:"主题",children:[t==="light"?o.jsx(Yt,{className:"w-4 h-4 text-gray-400"}):o.jsx(Zt,{className:"w-4 h-4 text-gray-300"}),o.jsx("span",{className:`text-sm ${t==="dark"?"text-gray-300":"text-gray-600"}`,children:"主题"})]}),o.jsxs("button",{className:`flex items-center gap-2 px-3 py-2 rounded-lg transition-colors ${t==="dark"?"hover:bg-slate-700":"hover:bg-gray-200"}`,onClick:a,"aria-label":"设置",title:"设置",children:[o.jsx(er,{className:`w-4 h-4 ${t==="dark"?"text-gray-300":"text-gray-400"}`}),o.jsx("span",{className:`text-sm ${t==="dark"?"text-gray-300":"text-gray-600"}`,children:"设置"})]})]}),o.jsxs("div",{className:`flex items-center gap-4 text-xs ${t==="dark"?"text-gray-400":"text-gray-500"}`,children:[o.jsxs("button",{className:`flex items-center gap-1 cursor-pointer hover:opacity-80 transition-opacity ${r==="online"?"text-green-400":"text-red-400"}`,onClick:i,title:"点击切换状态",children:[o.jsx("span",{className:`w-2 h-2 ${l} rounded-full`}),h]}),o.jsx("span",{children:"v1.0.0"})]})]})},vr=()=>{const e=pt(),{selectedAgentId:t,agents:r,theme:s,setSelectedAgentId:n}=_(),a=gt.useMemo(()=>{if(!t)return null;for(const u of r){const d=u.agents.find(b=>b.id===t);if(d)return d}return null},[t,r]),i=()=>{let u="h-16 border-b flex items-center justify-between px-6";return s==="dark"?u+=" border-gray-700":u+=" border-gray-200",u},l=u=>{switch(u){case"purple":return"from-purple-500 to-purple-600";case"orange":return"from-orange-500 to-orange-600";default:return"from-blue-500 to-purple-600"}},h=u=>{switch(u){case"purple":return o.jsx("svg",{className:"w-6 h-6 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10 20l4-16m4 4l4 4-4 4M6 16l-4-4 4-4"})});case"orange":return o.jsx("svg",{className:"w-6 h-6 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-6 9l2 2 4-4"})});default:return o.jsx("svg",{className:"w-6 h-6 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 10V3L4 14h7v7l9-11h-7z"})})}};return o.jsxs("header",{className:i(),children:[o.jsxs("div",{className:"flex items-center gap-4 flex-1 min-w-0",children:[o.jsx("button",{className:"mobile-menu-btn",id:"mobileMenuBtn","aria-label":"打开菜单",style:{display:"none",alignItems:"center",justifyContent:"center",width:"40px",height:"40px",borderRadius:"8px",background:"transparent",border:"none",cursor:"pointer",transition:"background 0.2s ease"},onMouseEnter:u=>{u.currentTarget.style.background=s==="dark"?"rgba(255, 255, 255, 0.1)":"rgba(0, 0, 0, 0.05)"},onMouseLeave:u=>{u.currentTarget.style.background="transparent"},children:o.jsx(tr,{className:`w-6 h-6 ${s==="dark"?"text-gray-300":"text-gray-600"}`})}),o.jsxs("button",{className:"flex items-center gap-4 cursor-pointer group relative text-left flex-shrink-0",onClick:()=>{n(null),e("/")},"aria-label":"返回首页",children:[o.jsx("div",{className:`w-10 h-10 bg-gradient-to-br ${a?l(a.avatarColor):"from-blue-500 to-purple-600"} rounded-lg flex items-center justify-center transition-all duration-300 group-hover:scale-110 group-hover:shadow-lg group-hover:shadow-blue-500/30 flex-shrink-0`,children:a?h(a.avatarColor):o.jsx("svg",{className:"w-6 h-6 text-white transition-transform duration-300 group-hover:rotate-12",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 10V3L4 14h7v7l9-11h-7z"})})}),o.jsxs("div",{className:"transition-transform duration-300 group-hover:translate-x-1 text-left min-w-0",children:[o.jsx("h1",{className:`text-lg font-bold ${s==="dark"?"text-gray-100":"text-gray-900"} transition-colors duration-300 group-hover:text-blue-600 dark:group-hover:text-blue-400 text-left truncate`,children:a?a.name:"AutoMate"}),o.jsx("p",{className:`text-xs ${s==="dark"?"text-gray-400":"text-gray-500"} transition-colors duration-300 group-hover:text-blue-500 dark:group-hover:text-blue-300 text-left truncate`,children:a?a.description:"智能体交互平台"})]})]})]}),o.jsxs("div",{className:"flex items-center gap-3 flex-shrink-0",children:[o.jsx("span",{className:`text-sm ${s==="dark"?"text-gray-300":"text-gray-600"}`,children:"欢迎回来,用户"}),o.jsx("div",{className:"w-8 h-8 rounded-full flex items-center justify-center flex-shrink-0",style:{background:s==="dark"?"#4b5563":"#d1d5db"},children:o.jsx("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 20 20",style:{color:s==="dark"?"#9ca3af":"#6b7280"},children:o.jsx("path",{fillRule:"evenodd",d:"M10 9a3 3 0 100-6 3 3 0 000 6zm-7 9a7 7 0 1114 0H3z",clipRule:"evenodd"})})})]})]})},Le=({children:e})=>{const{agents:t,setAgents:r,userSettings:s,setSelectedAgentId:n,searchQuery:a,setSearchQuery:i}=_(),{theme:l}=s,h=pt();E.useEffect(()=>{(async()=>{try{const j=await fetch("/config/agents.json");if(!j.ok)throw new Error("Failed to load agents configuration");const p=(await j.json()).agents.map(m=>({...m,agents:m.agents.map(g=>{let v="blue";return g.avatar==="avatar-1.png"&&(v="blue"),g.avatar==="avatar-2.png"&&(v="purple"),g.avatar==="avatar-3.png"&&(v="orange"),{...g,avatarColor:v,skills:g.skills?g.skills.map(k=>k.name):[]}})}));r(p)}catch(j){console.error("Error loading agents config:",j)}})()},[]);const u=x=>{n(x),h(`/agent/${x}`)},d=E.useMemo(()=>{if(!a||a.trim()==="")return!0;const x=a.toLowerCase();return t.some(j=>j.agents.some(f=>f.name.toLowerCase().includes(x)||f.description.toLowerCase().includes(x)))},[a,t]),b=()=>{let x="flex-1 flex flex-col";return l==="dark"?x+=" bg-gray-900":x+=" bg-gray-50",x};return o.jsxs("div",{className:`flex h-full ${l==="dark"?"dark-theme":"light-theme"}`,children:[o.jsxs(br,{children:[o.jsx(yr,{onSearchChange:x=>i(x),onClear:()=>i(""),searchQuery:a}),o.jsx("div",{className:"flex-1 overflow-y-auto scrollbar-thin",children:d?t.map(x=>o.jsx(wr,{groupName:x.group_name,agents:x.agents,children:x.agents.map(j=>o.jsx(jr,{agent:j,searchQuery:a,onClick:()=>u(j.id)},j.id))},x.group_name)):o.jsxs("div",{className:"p-8 text-center",children:[o.jsx("div",{className:`w-12 h-12 mx-auto mb-3 rounded-full flex items-center justify-center ${l==="dark"?"bg-gray-700":"bg-gray-200"}`,children:o.jsx("svg",{className:"w-6 h-6 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})})}),o.jsxs("p",{className:`text-sm mb-1 ${l==="dark"?"text-gray-300":"text-gray-600"}`,children:["未找到 ",o.jsx("strong",{className:"font-semibold",children:a})]}),o.jsx("p",{className:"text-xs text-gray-400",children:"请尝试其他关键词"})]})}),o.jsx(Cr,{})]}),o.jsxs("main",{className:b(),children:[o.jsx(vr,{}),o.jsx("div",{className:"flex-1 overflow-hidden",children:e})]})]})},kr=()=>{const{agents:e,theme:t}=_(),r=e.reduce((a,i)=>a+i.agents.length,0),s=e.reduce((a,i)=>a+i.agents.reduce((l,h)=>l+h.skills.length,0),0),n=t==="dark";return o.jsx("div",{className:"h-full flex items-center justify-center p-6",children:o.jsxs("div",{className:"text-center max-w-4xl w-full",children:[o.jsxs("div",{className:"relative mb-6",children:[o.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-blue-500/20 to-purple-500/20 blur-3xl rounded-full"}),o.jsx("div",{className:"relative w-28 h-28 mx-auto bg-gradient-to-br from-blue-500 to-purple-600 rounded-3xl flex items-center justify-center shadow-xl",children:o.jsx(Ke,{className:"w-14 h-14 text-white"})})]}),o.jsx("h1",{className:"text-4xl font-bold mb-3 bg-gradient-to-r from-blue-600 to-purple-600 bg-clip-text text-transparent",children:"欢迎使用 AutoMate"}),o.jsx("p",{className:`text-base mb-8 ${n?"text-gray-300":"text-gray-600"}`,children:"选择左侧的智能体开始对话，体验智能化的任务处理"}),o.jsxs("div",{className:"grid grid-cols-3 gap-4 mb-8",children:[o.jsxs("div",{className:`p-5 rounded-2xl transition-all duration-300 hover:scale-105 cursor-pointer ${n?"bg-gradient-to-br from-slate-800 to-slate-900 border border-slate-700":"bg-gradient-to-br from-blue-50 to-blue-100 border border-blue-100"}`,children:[o.jsx("div",{className:"w-10 h-10 mx-auto mb-3 bg-gradient-to-br from-blue-500 to-blue-600 rounded-xl flex items-center justify-center",children:o.jsx(Ke,{className:"w-5 h-5 text-white"})}),o.jsx("div",{id:"total-agents",className:"text-2xl font-bold mb-1 text-blue-600",children:String(r)}),o.jsx("div",{className:`text-xs ${n?"text-gray-400":"text-gray-600"}`,children:"可用智能体"})]}),o.jsxs("div",{className:`p-5 rounded-2xl transition-all duration-300 hover:scale-105 cursor-pointer ${n?"bg-gradient-to-br from-slate-800 to-slate-900 border border-slate-700":"bg-gradient-to-br from-green-50 to-green-100 border border-green-100"}`,children:[o.jsx("div",{className:"w-10 h-10 mx-auto mb-3 bg-gradient-to-br from-green-500 to-green-600 rounded-xl flex items-center justify-center",children:o.jsx($e,{className:"w-5 h-5 text-white"})}),o.jsx("div",{id:"total-skills",className:"text-2xl font-bold mb-1 text-green-600",children:String(s)}),o.jsx("div",{className:`text-xs ${n?"text-gray-400":"text-gray-600"}`,children:"可用技能"})]}),o.jsxs("div",{className:`p-5 rounded-2xl transition-all duration-300 hover:scale-105 cursor-pointer ${n?"bg-gradient-to-br from-slate-800 to-slate-900 border border-slate-700":"bg-gradient-to-br from-purple-50 to-purple-100 border border-purple-100"}`,children:[o.jsx("div",{className:"w-10 h-10 mx-auto mb-3 bg-gradient-to-br from-purple-500 to-purple-600 rounded-xl flex items-center justify-center",children:o.jsx(rr,{className:"w-5 h-5 text-white"})}),o.jsx("div",{id:"total-chats",className:"text-2xl font-bold mb-1 text-purple-600",children:"0"}),o.jsx("div",{className:`text-xs ${n?"text-gray-400":"text-gray-600"}`,children:"对话次数"})]})]}),o.jsxs("div",{className:`p-6 rounded-3xl ${n?"bg-gradient-to-br from-slate-800/50 to-slate-900/50 border border-slate-700":"bg-gradient-to-br from-white to-gray-50 border border-gray-200"}`,children:[o.jsxs("div",{className:"flex items-center justify-center gap-2 mb-5",children:[o.jsx(sr,{className:"w-5 h-5 text-yellow-500"}),o.jsx("h3",{className:`text-lg font-semibold ${n?"text-gray-100":"text-gray-900"}`,children:"快速开始"})]}),o.jsxs("div",{className:"space-y-3",children:[o.jsxs("div",{className:`flex items-center gap-3 p-3 rounded-lg ${n?"bg-slate-800/50":"bg-white/50"}`,children:[o.jsx("div",{className:"w-7 h-7 bg-gradient-to-br from-blue-500 to-blue-600 rounded-full flex items-center justify-center text-white font-bold text-xs",children:"1"}),o.jsx("span",{className:`text-left text-sm ${n?"text-gray-300":"text-gray-700"}`,children:"从左侧列表选择一个智能体"})]}),o.jsxs("div",{className:`flex items-center gap-3 p-3 rounded-lg ${n?"bg-slate-800/50":"bg-white/50"}`,children:[o.jsx("div",{className:"w-7 h-7 bg-gradient-to-br from-green-500 to-green-600 rounded-full flex items-center justify-center text-white font-bold text-xs",children:"2"}),o.jsx("span",{className:`text-left text-sm ${n?"text-gray-300":"text-gray-700"}`,children:"在输入框中输入您的问题"})]}),o.jsxs("div",{className:`flex items-center gap-3 p-3 rounded-lg ${n?"bg-slate-800/50":"bg-white/50"}`,children:[o.jsx("div",{className:"w-7 h-7 bg-gradient-to-br from-purple-500 to-purple-600 rounded-full flex items-center justify-center text-white font-bold text-xs",children:"3"}),o.jsx("span",{className:`text-left text-sm ${n?"text-gray-300":"text-gray-700"}`,children:"按 Enter 发送消息开始对话"})]})]})]})]})})};function yt(e,t){return function(){return e.apply(t,arguments)}}const{toString:Sr}=Object.prototype,{getPrototypeOf:ze}=Object,{iterator:ve,toStringTag:wt}=Symbol,ke=(e=>t=>{const r=Sr.call(t);return e[r]||(e[r]=r.slice(8,-1).toLowerCase())})(Object.create(null)),q=e=>(e=e.toLowerCase(),t=>ke(t)===e),Se=e=>t=>typeof t===e,{isArray:ae}=Array,oe=Se("undefined");function ce(e){return e!==null&&!oe(e)&&e.constructor!==null&&!oe(e.constructor)&&P(e.constructor.isBuffer)&&e.constructor.isBuffer(e)}const jt=q("ArrayBuffer");function Nr(e){let t;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?t=ArrayBuffer.isView(e):t=e&&e.buffer&&jt(e.buffer),t}const Er=Se("string"),P=Se("function"),Ct=Se("number"),de=e=>e!==null&&typeof e=="object",Rr=e=>e===!0||e===!1,ye=e=>{if(ke(e)!=="object")return!1;const t=ze(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(wt in e)&&!(ve in e)},Tr=e=>{if(!de(e)||ce(e))return!1;try{return Object.keys(e).length===0&&Object.getPrototypeOf(e)===Object.prototype}catch{return!1}},Ar=q("Date"),Or=q("File"),Lr=q("Blob"),Mr=q("FileList"),_r=e=>de(e)&&P(e.pipe),Dr=e=>{let t;return e&&(typeof FormData=="function"&&e instanceof FormData||P(e.append)&&((t=ke(e))==="formdata"||t==="object"&&P(e.toString)&&e.toString()==="[object FormData]"))},$r=q("URLSearchParams"),[Ur,Pr,Br,Fr]=["ReadableStream","Request","Response","Headers"].map(q),zr=e=>e.trim?e.trim():e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function ue(e,t,{allOwnKeys:r=!1}={}){if(e===null||typeof e>"u")return;let s,n;if(typeof e!="object"&&(e=[e]),ae(e))for(s=0,n=e.length;s<n;s++)t.call(null,e[s],s,e);else{if(ce(e))return;const a=r?Object.getOwnPropertyNames(e):Object.keys(e),i=a.length;let l;for(s=0;s<i;s++)l=a[s],t.call(null,e[l],l,e)}}function vt(e,t){if(ce(e))return null;t=t.toLowerCase();const r=Object.keys(e);let s=r.length,n;for(;s-- >0;)if(n=r[s],t===n.toLowerCase())return n;return null}const te=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,kt=e=>!oe(e)&&e!==te;function Ue(){const{caseless:e,skipUndefined:t}=kt(this)&&this||{},r={},s=(n,a)=>{if(a==="__proto__"||a==="constructor"||a==="prototype")return;const i=e&&vt(r,a)||a;ye(r[i])&&ye(n)?r[i]=Ue(r[i],n):ye(n)?r[i]=Ue({},n):ae(n)?r[i]=n.slice():(!t||!oe(n))&&(r[i]=n)};for(let n=0,a=arguments.length;n<a;n++)arguments[n]&&ue(arguments[n],s);return r}const Ir=(e,t,r,{allOwnKeys:s}={})=>(ue(t,(n,a)=>{r&&P(n)?Object.defineProperty(e,a,{value:yt(n,r),writable:!0,enumerable:!0,configurable:!0}):Object.defineProperty(e,a,{value:n,writable:!0,enumerable:!0,configurable:!0})},{allOwnKeys:s}),e),Hr=e=>(e.charCodeAt(0)===65279&&(e=e.slice(1)),e),qr=(e,t,r,s)=>{e.prototype=Object.create(t.prototype,s),Object.defineProperty(e.prototype,"constructor",{value:e,writable:!0,enumerable:!1,configurable:!0}),Object.defineProperty(e,"super",{value:t.prototype}),r&&Object.assign(e.prototype,r)},Wr=(e,t,r,s)=>{let n,a,i;const l={};if(t=t||{},e==null)return t;do{for(n=Object.getOwnPropertyNames(e),a=n.length;a-- >0;)i=n[a],(!s||s(i,e,t))&&!l[i]&&(t[i]=e[i],l[i]=!0);e=r!==!1&&ze(e)}while(e&&(!r||r(e,t))&&e!==Object.prototype);return t},Jr=(e,t,r)=>{e=String(e),(r===void 0||r>e.length)&&(r=e.length),r-=t.length;const s=e.indexOf(t,r);return s!==-1&&s===r},Vr=e=>{if(!e)return null;if(ae(e))return e;let t=e.length;if(!Ct(t))return null;const r=new Array(t);for(;t-- >0;)r[t]=e[t];return r},Kr=(e=>t=>e&&t instanceof e)(typeof Uint8Array<"u"&&ze(Uint8Array)),Gr=(e,t)=>{const s=(e&&e[ve]).call(e);let n;for(;(n=s.next())&&!n.done;){const a=n.value;t.call(e,a[0],a[1])}},Xr=(e,t)=>{let r;const s=[];for(;(r=e.exec(t))!==null;)s.push(r);return s},Qr=q("HTMLFormElement"),Yr=e=>e.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(r,s,n){return s.toUpperCase()+n}),Ye=(({hasOwnProperty:e})=>(t,r)=>e.call(t,r))(Object.prototype),Zr=q("RegExp"),St=(e,t)=>{const r=Object.getOwnPropertyDescriptors(e),s={};ue(r,(n,a)=>{let i;(i=t(n,a,e))!==!1&&(s[a]=i||n)}),Object.defineProperties(e,s)},es=e=>{St(e,(t,r)=>{if(P(e)&&["arguments","caller","callee"].indexOf(r)!==-1)return!1;const s=e[r];if(P(s)){if(t.enumerable=!1,"writable"in t){t.writable=!1;return}t.set||(t.set=()=>{throw Error("Can not rewrite read-only method '"+r+"'")})}})},ts=(e,t)=>{const r={},s=n=>{n.forEach(a=>{r[a]=!0})};return ae(e)?s(e):s(String(e).split(t)),r},rs=()=>{},ss=(e,t)=>e!=null&&Number.isFinite(e=+e)?e:t;function ns(e){return!!(e&&P(e.append)&&e[wt]==="FormData"&&e[ve])}const os=e=>{const t=new Array(10),r=(s,n)=>{if(de(s)){if(t.indexOf(s)>=0)return;if(ce(s))return s;if(!("toJSON"in s)){t[n]=s;const a=ae(s)?[]:{};return ue(s,(i,l)=>{const h=r(i,n+1);!oe(h)&&(a[l]=h)}),t[n]=void 0,a}}return s};return r(e,0)},as=q("AsyncFunction"),is=e=>e&&(de(e)||P(e))&&P(e.then)&&P(e.catch),Nt=((e,t)=>e?setImmediate:t?((r,s)=>(te.addEventListener("message",({source:n,data:a})=>{n===te&&a===r&&s.length&&s.shift()()},!1),n=>{s.push(n),te.postMessage(r,"*")}))(`axios@${Math.random()}`,[]):r=>setTimeout(r))(typeof setImmediate=="function",P(te.postMessage)),ls=typeof queueMicrotask<"u"?queueMicrotask.bind(te):typeof process<"u"&&process.nextTick||Nt,cs=e=>e!=null&&P(e[ve]),c={isArray:ae,isArrayBuffer:jt,isBuffer:ce,isFormData:Dr,isArrayBufferView:Nr,isString:Er,isNumber:Ct,isBoolean:Rr,isObject:de,isPlainObject:ye,isEmptyObject:Tr,isReadableStream:Ur,isRequest:Pr,isResponse:Br,isHeaders:Fr,isUndefined:oe,isDate:Ar,isFile:Or,isBlob:Lr,isRegExp:Zr,isFunction:P,isStream:_r,isURLSearchParams:$r,isTypedArray:Kr,isFileList:Mr,forEach:ue,merge:Ue,extend:Ir,trim:zr,stripBOM:Hr,inherits:qr,toFlatObject:Wr,kindOf:ke,kindOfTest:q,endsWith:Jr,toArray:Vr,forEachEntry:Gr,matchAll:Xr,isHTMLForm:Qr,hasOwnProperty:Ye,hasOwnProp:Ye,reduceDescriptors:St,freezeMethods:es,toObjectSet:ts,toCamelCase:Yr,noop:rs,toFiniteNumber:ss,findKey:vt,global:te,isContextDefined:kt,isSpecCompliantForm:ns,toJSONObject:os,isAsyncFn:as,isThenable:is,setImmediate:Nt,asap:ls,isIterable:cs};let C=class Et extends Error{static from(t,r,s,n,a,i){const l=new Et(t.message,r||t.code,s,n,a);return l.cause=t,l.name=t.name,i&&Object.assign(l,i),l}constructor(t,r,s,n,a){super(t),this.name="AxiosError",this.isAxiosError=!0,r&&(this.code=r),s&&(this.config=s),n&&(this.request=n),a&&(this.response=a,this.status=a.status)}toJSON(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:c.toJSONObject(this.config),code:this.code,status:this.status}}};C.ERR_BAD_OPTION_VALUE="ERR_BAD_OPTION_VALUE";C.ERR_BAD_OPTION="ERR_BAD_OPTION";C.ECONNABORTED="ECONNABORTED";C.ETIMEDOUT="ETIMEDOUT";C.ERR_NETWORK="ERR_NETWORK";C.ERR_FR_TOO_MANY_REDIRECTS="ERR_FR_TOO_MANY_REDIRECTS";C.ERR_DEPRECATED="ERR_DEPRECATED";C.ERR_BAD_RESPONSE="ERR_BAD_RESPONSE";C.ERR_BAD_REQUEST="ERR_BAD_REQUEST";C.ERR_CANCELED="ERR_CANCELED";C.ERR_NOT_SUPPORT="ERR_NOT_SUPPORT";C.ERR_INVALID_URL="ERR_INVALID_URL";const ds=null;function Pe(e){return c.isPlainObject(e)||c.isArray(e)}function Rt(e){return c.endsWith(e,"[]")?e.slice(0,-2):e}function Ze(e,t,r){return e?e.concat(t).map(function(n,a){return n=Rt(n),!r&&a?"["+n+"]":n}).join(r?".":""):t}function us(e){return c.isArray(e)&&!e.some(Pe)}const fs=c.toFlatObject(c,{},null,function(t){return/^is[A-Z]/.test(t)});function Ne(e,t,r){if(!c.isObject(e))throw new TypeError("target must be an object");t=t||new FormData,r=c.toFlatObject(r,{metaTokens:!0,dots:!1,indexes:!1},!1,function(p,m){return!c.isUndefined(m[p])});const s=r.metaTokens,n=r.visitor||d,a=r.dots,i=r.indexes,h=(r.Blob||typeof Blob<"u"&&Blob)&&c.isSpecCompliantForm(t);if(!c.isFunction(n))throw new TypeError("visitor must be a function");function u(f){if(f===null)return"";if(c.isDate(f))return f.toISOString();if(c.isBoolean(f))return f.toString();if(!h&&c.isBlob(f))throw new C("Blob is not supported. Use a Buffer instead.");return c.isArrayBuffer(f)||c.isTypedArray(f)?h&&typeof Blob=="function"?new Blob([f]):Buffer.from(f):f}function d(f,p,m){let g=f;if(f&&!m&&typeof f=="object"){if(c.endsWith(p,"{}"))p=s?p:p.slice(0,-2),f=JSON.stringify(f);else if(c.isArray(f)&&us(f)||(c.isFileList(f)||c.endsWith(p,"[]"))&&(g=c.toArray(f)))return p=Rt(p),g.forEach(function(k,y){!(c.isUndefined(k)||k===null)&&t.append(i===!0?Ze([p],y,a):i===null?p:p+"[]",u(k))}),!1}return Pe(f)?!0:(t.append(Ze(m,p,a),u(f)),!1)}const b=[],x=Object.assign(fs,{defaultVisitor:d,convertValue:u,isVisitable:Pe});function j(f,p){if(!c.isUndefined(f)){if(b.indexOf(f)!==-1)throw Error("Circular reference detected in "+p.join("."));b.push(f),c.forEach(f,function(g,v){(!(c.isUndefined(g)||g===null)&&n.call(t,g,c.isString(v)?v.trim():v,p,x))===!0&&j(g,p?p.concat(v):[v])}),b.pop()}}if(!c.isObject(e))throw new TypeError("data must be an object");return j(e),t}function et(e){const t={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(e).replace(/[!'()~]|%20|%00/g,function(s){return t[s]})}function Ie(e,t){this._pairs=[],e&&Ne(e,this,t)}const Tt=Ie.prototype;Tt.append=function(t,r){this._pairs.push([t,r])};Tt.toString=function(t){const r=t?function(s){return t.call(this,s,et)}:et;return this._pairs.map(function(n){return r(n[0])+"="+r(n[1])},"").join("&")};function hs(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+")}function At(e,t,r){if(!t)return e;const s=r&&r.encode||hs,n=c.isFunction(r)?{serialize:r}:r,a=n&&n.serialize;let i;if(a?i=a(t,n):i=c.isURLSearchParams(t)?t.toString():new Ie(t,n).toString(s),i){const l=e.indexOf("#");l!==-1&&(e=e.slice(0,l)),e+=(e.indexOf("?")===-1?"?":"&")+i}return e}class tt{constructor(){this.handlers=[]}use(t,r,s){return this.handlers.push({fulfilled:t,rejected:r,synchronous:s?s.synchronous:!1,runWhen:s?s.runWhen:null}),this.handlers.length-1}eject(t){this.handlers[t]&&(this.handlers[t]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(t){c.forEach(this.handlers,function(s){s!==null&&t(s)})}}const He={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1,legacyInterceptorReqResOrdering:!0},ms=typeof URLSearchParams<"u"?URLSearchParams:Ie,ps=typeof FormData<"u"?FormData:null,gs=typeof Blob<"u"?Blob:null,xs={isBrowser:!0,classes:{URLSearchParams:ms,FormData:ps,Blob:gs},protocols:["http","https","file","blob","url","data"]},qe=typeof window<"u"&&typeof document<"u",Be=typeof navigator=="object"&&navigator||void 0,bs=qe&&(!Be||["ReactNative","NativeScript","NS"].indexOf(Be.product)<0),ys=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",ws=qe&&window.location.href||"http://localhost",js=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:qe,hasStandardBrowserEnv:bs,hasStandardBrowserWebWorkerEnv:ys,navigator:Be,origin:ws},Symbol.toStringTag,{value:"Module"})),$={...js,...xs};function Cs(e,t){return Ne(e,new $.classes.URLSearchParams,{visitor:function(r,s,n,a){return $.isNode&&c.isBuffer(r)?(this.append(s,r.toString("base64")),!1):a.defaultVisitor.apply(this,arguments)},...t})}function vs(e){return c.matchAll(/\w+|\[(\w*)]/g,e).map(t=>t[0]==="[]"?"":t[1]||t[0])}function ks(e){const t={},r=Object.keys(e);let s;const n=r.length;let a;for(s=0;s<n;s++)a=r[s],t[a]=e[a];return t}function Ot(e){function t(r,s,n,a){let i=r[a++];if(i==="__proto__")return!0;const l=Number.isFinite(+i),h=a>=r.length;return i=!i&&c.isArray(n)?n.length:i,h?(c.hasOwnProp(n,i)?n[i]=[n[i],s]:n[i]=s,!l):((!n[i]||!c.isObject(n[i]))&&(n[i]=[]),t(r,s,n[i],a)&&c.isArray(n[i])&&(n[i]=ks(n[i])),!l)}if(c.isFormData(e)&&c.isFunction(e.entries)){const r={};return c.forEachEntry(e,(s,n)=>{t(vs(s),n,r,0)}),r}return null}function Ss(e,t,r){if(c.isString(e))try{return(t||JSON.parse)(e),c.trim(e)}catch(s){if(s.name!=="SyntaxError")throw s}return(r||JSON.stringify)(e)}const fe={transitional:He,adapter:["xhr","http","fetch"],transformRequest:[function(t,r){const s=r.getContentType()||"",n=s.indexOf("application/json")>-1,a=c.isObject(t);if(a&&c.isHTMLForm(t)&&(t=new FormData(t)),c.isFormData(t))return n?JSON.stringify(Ot(t)):t;if(c.isArrayBuffer(t)||c.isBuffer(t)||c.isStream(t)||c.isFile(t)||c.isBlob(t)||c.isReadableStream(t))return t;if(c.isArrayBufferView(t))return t.buffer;if(c.isURLSearchParams(t))return r.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),t.toString();let l;if(a){if(s.indexOf("application/x-www-form-urlencoded")>-1)return Cs(t,this.formSerializer).toString();if((l=c.isFileList(t))||s.indexOf("multipart/form-data")>-1){const h=this.env&&this.env.FormData;return Ne(l?{"files[]":t}:t,h&&new h,this.formSerializer)}}return a||n?(r.setContentType("application/json",!1),Ss(t)):t}],transformResponse:[function(t){const r=this.transitional||fe.transitional,s=r&&r.forcedJSONParsing,n=this.responseType==="json";if(c.isResponse(t)||c.isReadableStream(t))return t;if(t&&c.isString(t)&&(s&&!this.responseType||n)){const i=!(r&&r.silentJSONParsing)&&n;try{return JSON.parse(t,this.parseReviver)}catch(l){if(i)throw l.name==="SyntaxError"?C.from(l,C.ERR_BAD_RESPONSE,this,null,this.response):l}}return t}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:$.classes.FormData,Blob:$.classes.Blob},validateStatus:function(t){return t>=200&&t<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};c.forEach(["delete","get","head","post","put","patch"],e=>{fe.headers[e]={}});const Ns=c.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),Es=e=>{const t={};let r,s,n;return e&&e.split(`
`).forEach(function(i){n=i.indexOf(":"),r=i.substring(0,n).trim().toLowerCase(),s=i.substring(n+1).trim(),!(!r||t[r]&&Ns[r])&&(r==="set-cookie"?t[r]?t[r].push(s):t[r]=[s]:t[r]=t[r]?t[r]+", "+s:s)}),t},rt=Symbol("internals");function le(e){return e&&String(e).trim().toLowerCase()}function we(e){return e===!1||e==null?e:c.isArray(e)?e.map(we):String(e)}function Rs(e){const t=Object.create(null),r=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let s;for(;s=r.exec(e);)t[s[1]]=s[2];return t}const Ts=e=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(e.trim());function Me(e,t,r,s,n){if(c.isFunction(s))return s.call(this,t,r);if(n&&(t=r),!!c.isString(t)){if(c.isString(s))return t.indexOf(s)!==-1;if(c.isRegExp(s))return s.test(t)}}function As(e){return e.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(t,r,s)=>r.toUpperCase()+s)}function Os(e,t){const r=c.toCamelCase(" "+t);["get","set","has"].forEach(s=>{Object.defineProperty(e,s+r,{value:function(n,a,i){return this[s].call(this,t,n,a,i)},configurable:!0})})}let B=class{constructor(t){t&&this.set(t)}set(t,r,s){const n=this;function a(l,h,u){const d=le(h);if(!d)throw new Error("header name must be a non-empty string");const b=c.findKey(n,d);(!b||n[b]===void 0||u===!0||u===void 0&&n[b]!==!1)&&(n[b||h]=we(l))}const i=(l,h)=>c.forEach(l,(u,d)=>a(u,d,h));if(c.isPlainObject(t)||t instanceof this.constructor)i(t,r);else if(c.isString(t)&&(t=t.trim())&&!Ts(t))i(Es(t),r);else if(c.isObject(t)&&c.isIterable(t)){let l={},h,u;for(const d of t){if(!c.isArray(d))throw TypeError("Object iterator must return a key-value pair");l[u=d[0]]=(h=l[u])?c.isArray(h)?[...h,d[1]]:[h,d[1]]:d[1]}i(l,r)}else t!=null&&a(r,t,s);return this}get(t,r){if(t=le(t),t){const s=c.findKey(this,t);if(s){const n=this[s];if(!r)return n;if(r===!0)return Rs(n);if(c.isFunction(r))return r.call(this,n,s);if(c.isRegExp(r))return r.exec(n);throw new TypeError("parser must be boolean|regexp|function")}}}has(t,r){if(t=le(t),t){const s=c.findKey(this,t);return!!(s&&this[s]!==void 0&&(!r||Me(this,this[s],s,r)))}return!1}delete(t,r){const s=this;let n=!1;function a(i){if(i=le(i),i){const l=c.findKey(s,i);l&&(!r||Me(s,s[l],l,r))&&(delete s[l],n=!0)}}return c.isArray(t)?t.forEach(a):a(t),n}clear(t){const r=Object.keys(this);let s=r.length,n=!1;for(;s--;){const a=r[s];(!t||Me(this,this[a],a,t,!0))&&(delete this[a],n=!0)}return n}normalize(t){const r=this,s={};return c.forEach(this,(n,a)=>{const i=c.findKey(s,a);if(i){r[i]=we(n),delete r[a];return}const l=t?As(a):String(a).trim();l!==a&&delete r[a],r[l]=we(n),s[l]=!0}),this}concat(...t){return this.constructor.concat(this,...t)}toJSON(t){const r=Object.create(null);return c.forEach(this,(s,n)=>{s!=null&&s!==!1&&(r[n]=t&&c.isArray(s)?s.join(", "):s)}),r}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([t,r])=>t+": "+r).join(`
`)}getSetCookie(){return this.get("set-cookie")||[]}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(t){return t instanceof this?t:new this(t)}static concat(t,...r){const s=new this(t);return r.forEach(n=>s.set(n)),s}static accessor(t){const s=(this[rt]=this[rt]={accessors:{}}).accessors,n=this.prototype;function a(i){const l=le(i);s[l]||(Os(n,i),s[l]=!0)}return c.isArray(t)?t.forEach(a):a(t),this}};B.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);c.reduceDescriptors(B.prototype,({value:e},t)=>{let r=t[0].toUpperCase()+t.slice(1);return{get:()=>e,set(s){this[r]=s}}});c.freezeMethods(B);function _e(e,t){const r=this||fe,s=t||r,n=B.from(s.headers);let a=s.data;return c.forEach(e,function(l){a=l.call(r,a,n.normalize(),t?t.status:void 0)}),n.normalize(),a}function Lt(e){return!!(e&&e.__CANCEL__)}let he=class extends C{constructor(t,r,s){super(t??"canceled",C.ERR_CANCELED,r,s),this.name="CanceledError",this.__CANCEL__=!0}};function Mt(e,t,r){const s=r.config.validateStatus;!r.status||!s||s(r.status)?e(r):t(new C("Request failed with status code "+r.status,[C.ERR_BAD_REQUEST,C.ERR_BAD_RESPONSE][Math.floor(r.status/100)-4],r.config,r.request,r))}function Ls(e){const t=/^([-+\w]{1,25})(:?\/\/|:)/.exec(e);return t&&t[1]||""}function Ms(e,t){e=e||10;const r=new Array(e),s=new Array(e);let n=0,a=0,i;return t=t!==void 0?t:1e3,function(h){const u=Date.now(),d=s[a];i||(i=u),r[n]=h,s[n]=u;let b=a,x=0;for(;b!==n;)x+=r[b++],b=b%e;if(n=(n+1)%e,n===a&&(a=(a+1)%e),u-i<t)return;const j=d&&u-d;return j?Math.round(x*1e3/j):void 0}}function _s(e,t){let r=0,s=1e3/t,n,a;const i=(u,d=Date.now())=>{r=d,n=null,a&&(clearTimeout(a),a=null),e(...u)};return[(...u)=>{const d=Date.now(),b=d-r;b>=s?i(u,d):(n=u,a||(a=setTimeout(()=>{a=null,i(n)},s-b)))},()=>n&&i(n)]}const Ce=(e,t,r=3)=>{let s=0;const n=Ms(50,250);return _s(a=>{const i=a.loaded,l=a.lengthComputable?a.total:void 0,h=i-s,u=n(h),d=i<=l;s=i;const b={loaded:i,total:l,progress:l?i/l:void 0,bytes:h,rate:u||void 0,estimated:u&&l&&d?(l-i)/u:void 0,event:a,lengthComputable:l!=null,[t?"download":"upload"]:!0};e(b)},r)},st=(e,t)=>{const r=e!=null;return[s=>t[0]({lengthComputable:r,total:e,loaded:s}),t[1]]},nt=e=>(...t)=>c.asap(()=>e(...t)),Ds=$.hasStandardBrowserEnv?((e,t)=>r=>(r=new URL(r,$.origin),e.protocol===r.protocol&&e.host===r.host&&(t||e.port===r.port)))(new URL($.origin),$.navigator&&/(msie|trident)/i.test($.navigator.userAgent)):()=>!0,$s=$.hasStandardBrowserEnv?{write(e,t,r,s,n,a,i){if(typeof document>"u")return;const l=[`${e}=${encodeURIComponent(t)}`];c.isNumber(r)&&l.push(`expires=${new Date(r).toUTCString()}`),c.isString(s)&&l.push(`path=${s}`),c.isString(n)&&l.push(`domain=${n}`),a===!0&&l.push("secure"),c.isString(i)&&l.push(`SameSite=${i}`),document.cookie=l.join("; ")},read(e){if(typeof document>"u")return null;const t=document.cookie.match(new RegExp("(?:^|; )"+e+"=([^;]*)"));return t?decodeURIComponent(t[1]):null},remove(e){this.write(e,"",Date.now()-864e5,"/")}}:{write(){},read(){return null},remove(){}};function Us(e){return typeof e!="string"?!1:/^([a-z][a-z\d+\-.]*:)?\/\//i.test(e)}function Ps(e,t){return t?e.replace(/\/?\/$/,"")+"/"+t.replace(/^\/+/,""):e}function _t(e,t,r){let s=!Us(t);return e&&(s||r==!1)?Ps(e,t):t}const ot=e=>e instanceof B?{...e}:e;function se(e,t){t=t||{};const r={};function s(u,d,b,x){return c.isPlainObject(u)&&c.isPlainObject(d)?c.merge.call({caseless:x},u,d):c.isPlainObject(d)?c.merge({},d):c.isArray(d)?d.slice():d}function n(u,d,b,x){if(c.isUndefined(d)){if(!c.isUndefined(u))return s(void 0,u,b,x)}else return s(u,d,b,x)}function a(u,d){if(!c.isUndefined(d))return s(void 0,d)}function i(u,d){if(c.isUndefined(d)){if(!c.isUndefined(u))return s(void 0,u)}else return s(void 0,d)}function l(u,d,b){if(b in t)return s(u,d);if(b in e)return s(void 0,u)}const h={url:a,method:a,data:a,baseURL:i,transformRequest:i,transformResponse:i,paramsSerializer:i,timeout:i,timeoutMessage:i,withCredentials:i,withXSRFToken:i,adapter:i,responseType:i,xsrfCookieName:i,xsrfHeaderName:i,onUploadProgress:i,onDownloadProgress:i,decompress:i,maxContentLength:i,maxBodyLength:i,beforeRedirect:i,transport:i,httpAgent:i,httpsAgent:i,cancelToken:i,socketPath:i,responseEncoding:i,validateStatus:l,headers:(u,d,b)=>n(ot(u),ot(d),b,!0)};return c.forEach(Object.keys({...e,...t}),function(d){if(d==="__proto__"||d==="constructor"||d==="prototype")return;const b=c.hasOwnProp(h,d)?h[d]:n,x=b(e[d],t[d],d);c.isUndefined(x)&&b!==l||(r[d]=x)}),r}const Dt=e=>{const t=se({},e);let{data:r,withXSRFToken:s,xsrfHeaderName:n,xsrfCookieName:a,headers:i,auth:l}=t;if(t.headers=i=B.from(i),t.url=At(_t(t.baseURL,t.url,t.allowAbsoluteUrls),e.params,e.paramsSerializer),l&&i.set("Authorization","Basic "+btoa((l.username||"")+":"+(l.password?unescape(encodeURIComponent(l.password)):""))),c.isFormData(r)){if($.hasStandardBrowserEnv||$.hasStandardBrowserWebWorkerEnv)i.setContentType(void 0);else if(c.isFunction(r.getHeaders)){const h=r.getHeaders(),u=["content-type","content-length"];Object.entries(h).forEach(([d,b])=>{u.includes(d.toLowerCase())&&i.set(d,b)})}}if($.hasStandardBrowserEnv&&(s&&c.isFunction(s)&&(s=s(t)),s||s!==!1&&Ds(t.url))){const h=n&&a&&$s.read(a);h&&i.set(n,h)}return t},Bs=typeof XMLHttpRequest<"u",Fs=Bs&&function(e){return new Promise(function(r,s){const n=Dt(e);let a=n.data;const i=B.from(n.headers).normalize();let{responseType:l,onUploadProgress:h,onDownloadProgress:u}=n,d,b,x,j,f;function p(){j&&j(),f&&f(),n.cancelToken&&n.cancelToken.unsubscribe(d),n.signal&&n.signal.removeEventListener("abort",d)}let m=new XMLHttpRequest;m.open(n.method.toUpperCase(),n.url,!0),m.timeout=n.timeout;function g(){if(!m)return;const k=B.from("getAllResponseHeaders"in m&&m.getAllResponseHeaders()),S={data:!l||l==="text"||l==="json"?m.responseText:m.response,status:m.status,statusText:m.statusText,headers:k,config:e,request:m};Mt(function(R){r(R),p()},function(R){s(R),p()},S),m=null}"onloadend"in m?m.onloadend=g:m.onreadystatechange=function(){!m||m.readyState!==4||m.status===0&&!(m.responseURL&&m.responseURL.indexOf("file:")===0)||setTimeout(g)},m.onabort=function(){m&&(s(new C("Request aborted",C.ECONNABORTED,e,m)),m=null)},m.onerror=function(y){const S=y&&y.message?y.message:"Network Error",O=new C(S,C.ERR_NETWORK,e,m);O.event=y||null,s(O),m=null},m.ontimeout=function(){let y=n.timeout?"timeout of "+n.timeout+"ms exceeded":"timeout exceeded";const S=n.transitional||He;n.timeoutErrorMessage&&(y=n.timeoutErrorMessage),s(new C(y,S.clarifyTimeoutError?C.ETIMEDOUT:C.ECONNABORTED,e,m)),m=null},a===void 0&&i.setContentType(null),"setRequestHeader"in m&&c.forEach(i.toJSON(),function(y,S){m.setRequestHeader(S,y)}),c.isUndefined(n.withCredentials)||(m.withCredentials=!!n.withCredentials),l&&l!=="json"&&(m.responseType=n.responseType),u&&([x,f]=Ce(u,!0),m.addEventListener("progress",x)),h&&m.upload&&([b,j]=Ce(h),m.upload.addEventListener("progress",b),m.upload.addEventListener("loadend",j)),(n.cancelToken||n.signal)&&(d=k=>{m&&(s(!k||k.type?new he(null,e,m):k),m.abort(),m=null)},n.cancelToken&&n.cancelToken.subscribe(d),n.signal&&(n.signal.aborted?d():n.signal.addEventListener("abort",d)));const v=Ls(n.url);if(v&&$.protocols.indexOf(v)===-1){s(new C("Unsupported protocol "+v+":",C.ERR_BAD_REQUEST,e));return}m.send(a||null)})},zs=(e,t)=>{const{length:r}=e=e?e.filter(Boolean):[];if(t||r){let s=new AbortController,n;const a=function(u){if(!n){n=!0,l();const d=u instanceof Error?u:this.reason;s.abort(d instanceof C?d:new he(d instanceof Error?d.message:d))}};let i=t&&setTimeout(()=>{i=null,a(new C(`timeout of ${t}ms exceeded`,C.ETIMEDOUT))},t);const l=()=>{e&&(i&&clearTimeout(i),i=null,e.forEach(u=>{u.unsubscribe?u.unsubscribe(a):u.removeEventListener("abort",a)}),e=null)};e.forEach(u=>u.addEventListener("abort",a));const{signal:h}=s;return h.unsubscribe=()=>c.asap(l),h}},Is=function*(e,t){let r=e.byteLength;if(r<t){yield e;return}let s=0,n;for(;s<r;)n=s+t,yield e.slice(s,n),s=n},Hs=async function*(e,t){for await(const r of qs(e))yield*Is(r,t)},qs=async function*(e){if(e[Symbol.asyncIterator]){yield*e;return}const t=e.getReader();try{for(;;){const{done:r,value:s}=await t.read();if(r)break;yield s}}finally{await t.cancel()}},at=(e,t,r,s)=>{const n=Hs(e,t);let a=0,i,l=h=>{i||(i=!0,s&&s(h))};return new ReadableStream({async pull(h){try{const{done:u,value:d}=await n.next();if(u){l(),h.close();return}let b=d.byteLength;if(r){let x=a+=b;r(x)}h.enqueue(new Uint8Array(d))}catch(u){throw l(u),u}},cancel(h){return l(h),n.return()}},{highWaterMark:2})},it=64*1024,{isFunction:be}=c,Ws=(({Request:e,Response:t})=>({Request:e,Response:t}))(c.global),{ReadableStream:lt,TextEncoder:ct}=c.global,dt=(e,...t)=>{try{return!!e(...t)}catch{return!1}},Js=e=>{e=c.merge.call({skipUndefined:!0},Ws,e);const{fetch:t,Request:r,Response:s}=e,n=t?be(t):typeof fetch=="function",a=be(r),i=be(s);if(!n)return!1;const l=n&&be(lt),h=n&&(typeof ct=="function"?(f=>p=>f.encode(p))(new ct):async f=>new Uint8Array(await new r(f).arrayBuffer())),u=a&&l&&dt(()=>{let f=!1;const p=new r($.origin,{body:new lt,method:"POST",get duplex(){return f=!0,"half"}}).headers.has("Content-Type");return f&&!p}),d=i&&l&&dt(()=>c.isReadableStream(new s("").body)),b={stream:d&&(f=>f.body)};n&&["text","arrayBuffer","blob","formData","stream"].forEach(f=>{!b[f]&&(b[f]=(p,m)=>{let g=p&&p[f];if(g)return g.call(p);throw new C(`Response type '${f}' is not supported`,C.ERR_NOT_SUPPORT,m)})});const x=async f=>{if(f==null)return 0;if(c.isBlob(f))return f.size;if(c.isSpecCompliantForm(f))return(await new r($.origin,{method:"POST",body:f}).arrayBuffer()).byteLength;if(c.isArrayBufferView(f)||c.isArrayBuffer(f))return f.byteLength;if(c.isURLSearchParams(f)&&(f=f+""),c.isString(f))return(await h(f)).byteLength},j=async(f,p)=>{const m=c.toFiniteNumber(f.getContentLength());return m??x(p)};return async f=>{let{url:p,method:m,data:g,signal:v,cancelToken:k,timeout:y,onDownloadProgress:S,onUploadProgress:O,responseType:R,headers:U,withCredentials:W="same-origin",fetchOptions:M}=Dt(f),J=t||fetch;R=R?(R+"").toLowerCase():"text";let V=zs([v,k&&k.toAbortSignal()],y),X=null;const F=V&&V.unsubscribe&&(()=>{V.unsubscribe()});let ne;try{if(O&&u&&m!=="get"&&m!=="head"&&(ne=await j(U,g))!==0){let G=new r(p,{method:"POST",body:g,duplex:"half"}),Q;if(c.isFormData(g)&&(Q=G.headers.get("content-type"))&&U.setContentType(Q),G.body){const[ie,Y]=st(ne,Ce(nt(O)));g=at(G.body,it,ie,Y)}}c.isString(W)||(W=W?"include":"omit");const D=a&&"credentials"in r.prototype,me={...M,signal:V,method:m.toUpperCase(),headers:U.normalize().toJSON(),body:g,duplex:"half",credentials:D?W:void 0};X=a&&new r(p,me);let K=await(a?J(X,M):J(p,me));const pe=d&&(R==="stream"||R==="response");if(d&&(S||pe&&F)){const G={};["status","statusText","headers"].forEach(ge=>{G[ge]=K[ge]});const Q=c.toFiniteNumber(K.headers.get("content-length")),[ie,Y]=S&&st(Q,Ce(nt(S),!0))||[];K=new s(at(K.body,it,ie,()=>{Y&&Y(),F&&F()}),G)}R=R||"text";let Re=await b[c.findKey(b,R)||"text"](K,f);return!pe&&F&&F(),await new Promise((G,Q)=>{Mt(G,Q,{data:Re,headers:B.from(K.headers),status:K.status,statusText:K.statusText,config:f,request:X})})}catch(D){throw F&&F(),D&&D.name==="TypeError"&&/Load failed|fetch/i.test(D.message)?Object.assign(new C("Network Error",C.ERR_NETWORK,f,X,D&&D.response),{cause:D.cause||D}):C.from(D,D&&D.code,f,X,D&&D.response)}}},Vs=new Map,$t=e=>{let t=e&&e.env||{};const{fetch:r,Request:s,Response:n}=t,a=[s,n,r];let i=a.length,l=i,h,u,d=Vs;for(;l--;)h=a[l],u=d.get(h),u===void 0&&d.set(h,u=l?new Map:Js(t)),d=u;return u};$t();const We={http:ds,xhr:Fs,fetch:{get:$t}};c.forEach(We,(e,t)=>{if(e){try{Object.defineProperty(e,"name",{value:t})}catch{}Object.defineProperty(e,"adapterName",{value:t})}});const ut=e=>`- ${e}`,Ks=e=>c.isFunction(e)||e===null||e===!1;function Gs(e,t){e=c.isArray(e)?e:[e];const{length:r}=e;let s,n;const a={};for(let i=0;i<r;i++){s=e[i];let l;if(n=s,!Ks(s)&&(n=We[(l=String(s)).toLowerCase()],n===void 0))throw new C(`Unknown adapter '${l}'`);if(n&&(c.isFunction(n)||(n=n.get(t))))break;a[l||"#"+i]=n}if(!n){const i=Object.entries(a).map(([h,u])=>`adapter ${h} `+(u===!1?"is not supported by the environment":"is not available in the build"));let l=r?i.length>1?`since :
`+i.map(ut).join(`
`):" "+ut(i[0]):"as no adapter specified";throw new C("There is no suitable adapter to dispatch the request "+l,"ERR_NOT_SUPPORT")}return n}const Ut={getAdapter:Gs,adapters:We};function De(e){if(e.cancelToken&&e.cancelToken.throwIfRequested(),e.signal&&e.signal.aborted)throw new he(null,e)}function ft(e){return De(e),e.headers=B.from(e.headers),e.data=_e.call(e,e.transformRequest),["post","put","patch"].indexOf(e.method)!==-1&&e.headers.setContentType("application/x-www-form-urlencoded",!1),Ut.getAdapter(e.adapter||fe.adapter,e)(e).then(function(s){return De(e),s.data=_e.call(e,e.transformResponse,s),s.headers=B.from(s.headers),s},function(s){return Lt(s)||(De(e),s&&s.response&&(s.response.data=_e.call(e,e.transformResponse,s.response),s.response.headers=B.from(s.response.headers))),Promise.reject(s)})}const Pt="1.13.5",Ee={};["object","boolean","number","function","string","symbol"].forEach((e,t)=>{Ee[e]=function(s){return typeof s===e||"a"+(t<1?"n ":" ")+e}});const ht={};Ee.transitional=function(t,r,s){function n(a,i){return"[Axios v"+Pt+"] Transitional option '"+a+"'"+i+(s?". "+s:"")}return(a,i,l)=>{if(t===!1)throw new C(n(i," has been removed"+(r?" in "+r:"")),C.ERR_DEPRECATED);return r&&!ht[i]&&(ht[i]=!0,console.warn(n(i," has been deprecated since v"+r+" and will be removed in the near future"))),t?t(a,i,l):!0}};Ee.spelling=function(t){return(r,s)=>(console.warn(`${s} is likely a misspelling of ${t}`),!0)};function Xs(e,t,r){if(typeof e!="object")throw new C("options must be an object",C.ERR_BAD_OPTION_VALUE);const s=Object.keys(e);let n=s.length;for(;n-- >0;){const a=s[n],i=t[a];if(i){const l=e[a],h=l===void 0||i(l,a,e);if(h!==!0)throw new C("option "+a+" must be "+h,C.ERR_BAD_OPTION_VALUE);continue}if(r!==!0)throw new C("Unknown option "+a,C.ERR_BAD_OPTION)}}const je={assertOptions:Xs,validators:Ee},H=je.validators;let re=class{constructor(t){this.defaults=t||{},this.interceptors={request:new tt,response:new tt}}async request(t,r){try{return await this._request(t,r)}catch(s){if(s instanceof Error){let n={};Error.captureStackTrace?Error.captureStackTrace(n):n=new Error;const a=n.stack?n.stack.replace(/^.+\n/,""):"";try{s.stack?a&&!String(s.stack).endsWith(a.replace(/^.+\n.+\n/,""))&&(s.stack+=`
`+a):s.stack=a}catch{}}throw s}}_request(t,r){typeof t=="string"?(r=r||{},r.url=t):r=t||{},r=se(this.defaults,r);const{transitional:s,paramsSerializer:n,headers:a}=r;s!==void 0&&je.assertOptions(s,{silentJSONParsing:H.transitional(H.boolean),forcedJSONParsing:H.transitional(H.boolean),clarifyTimeoutError:H.transitional(H.boolean),legacyInterceptorReqResOrdering:H.transitional(H.boolean)},!1),n!=null&&(c.isFunction(n)?r.paramsSerializer={serialize:n}:je.assertOptions(n,{encode:H.function,serialize:H.function},!0)),r.allowAbsoluteUrls!==void 0||(this.defaults.allowAbsoluteUrls!==void 0?r.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:r.allowAbsoluteUrls=!0),je.assertOptions(r,{baseUrl:H.spelling("baseURL"),withXsrfToken:H.spelling("withXSRFToken")},!0),r.method=(r.method||this.defaults.method||"get").toLowerCase();let i=a&&c.merge(a.common,a[r.method]);a&&c.forEach(["delete","get","head","post","put","patch","common"],f=>{delete a[f]}),r.headers=B.concat(i,a);const l=[];let h=!0;this.interceptors.request.forEach(function(p){if(typeof p.runWhen=="function"&&p.runWhen(r)===!1)return;h=h&&p.synchronous;const m=r.transitional||He;m&&m.legacyInterceptorReqResOrdering?l.unshift(p.fulfilled,p.rejected):l.push(p.fulfilled,p.rejected)});const u=[];this.interceptors.response.forEach(function(p){u.push(p.fulfilled,p.rejected)});let d,b=0,x;if(!h){const f=[ft.bind(this),void 0];for(f.unshift(...l),f.push(...u),x=f.length,d=Promise.resolve(r);b<x;)d=d.then(f[b++],f[b++]);return d}x=l.length;let j=r;for(;b<x;){const f=l[b++],p=l[b++];try{j=f(j)}catch(m){p.call(this,m);break}}try{d=ft.call(this,j)}catch(f){return Promise.reject(f)}for(b=0,x=u.length;b<x;)d=d.then(u[b++],u[b++]);return d}getUri(t){t=se(this.defaults,t);const r=_t(t.baseURL,t.url,t.allowAbsoluteUrls);return At(r,t.params,t.paramsSerializer)}};c.forEach(["delete","get","head","options"],function(t){re.prototype[t]=function(r,s){return this.request(se(s||{},{method:t,url:r,data:(s||{}).data}))}});c.forEach(["post","put","patch"],function(t){function r(s){return function(a,i,l){return this.request(se(l||{},{method:t,headers:s?{"Content-Type":"multipart/form-data"}:{},url:a,data:i}))}}re.prototype[t]=r(),re.prototype[t+"Form"]=r(!0)});let Qs=class Bt{constructor(t){if(typeof t!="function")throw new TypeError("executor must be a function.");let r;this.promise=new Promise(function(a){r=a});const s=this;this.promise.then(n=>{if(!s._listeners)return;let a=s._listeners.length;for(;a-- >0;)s._listeners[a](n);s._listeners=null}),this.promise.then=n=>{let a;const i=new Promise(l=>{s.subscribe(l),a=l}).then(n);return i.cancel=function(){s.unsubscribe(a)},i},t(function(a,i,l){s.reason||(s.reason=new he(a,i,l),r(s.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(t){if(this.reason){t(this.reason);return}this._listeners?this._listeners.push(t):this._listeners=[t]}unsubscribe(t){if(!this._listeners)return;const r=this._listeners.indexOf(t);r!==-1&&this._listeners.splice(r,1)}toAbortSignal(){const t=new AbortController,r=s=>{t.abort(s)};return this.subscribe(r),t.signal.unsubscribe=()=>this.unsubscribe(r),t.signal}static source(){let t;return{token:new Bt(function(n){t=n}),cancel:t}}};function Ys(e){return function(r){return e.apply(null,r)}}function Zs(e){return c.isObject(e)&&e.isAxiosError===!0}const Fe={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511,WebServerIsDown:521,ConnectionTimedOut:522,OriginIsUnreachable:523,TimeoutOccurred:524,SslHandshakeFailed:525,InvalidSslCertificate:526};Object.entries(Fe).forEach(([e,t])=>{Fe[t]=e});function Ft(e){const t=new re(e),r=yt(re.prototype.request,t);return c.extend(r,re.prototype,t,{allOwnKeys:!0}),c.extend(r,t,null,{allOwnKeys:!0}),r.create=function(n){return Ft(se(e,n))},r}const L=Ft(fe);L.Axios=re;L.CanceledError=he;L.CancelToken=Qs;L.isCancel=Lt;L.VERSION=Pt;L.toFormData=Ne;L.AxiosError=C;L.Cancel=L.CanceledError;L.all=function(t){return Promise.all(t)};L.spread=Ys;L.isAxiosError=Zs;L.mergeConfig=se;L.AxiosHeaders=B;L.formToJSON=e=>Ot(c.isHTMLForm(e)?new FormData(e):e);L.getAdapter=Ut.getAdapter;L.HttpStatusCode=Fe;L.default=L;const{Axios:Cn,AxiosError:vn,CanceledError:kn,isCancel:Sn,CancelToken:Nn,VERSION:En,all:Rn,Cancel:Tn,isAxiosError:An,spread:On,toFormData:Ln,AxiosHeaders:Mn,HttpStatusCode:_n,formToJSON:Dn,getAdapter:$n,mergeConfig:Un}=L;async function en(e){try{const t=e.match(/\.\/skills\/(.+)/),r=t?t[1]:e.replace(/^\.\//,""),s=await fetch(`/skills/${r}/SKILL.md`);if(s.ok){const n=await s.text(),a=n.match(/## When to Use[\s\S]*?(?=##\s|$)/i);if(a)return a[0].replace(/## When to Use\n+/i,"").trim();const i=n.match(/#\s+(.+)/);return i?i[1].trim():n.substring(0,500)}return""}catch{return""}}function zt(e,t){const r=[];for(const n of e.skills){const a=t.get(n.name);a&&r.push(`【技能: ${n.name}】
${a}`)}let s=`你是 ${e.name}。${e.description||""}

`;return r.length>0&&(s+=`你可以使用以下技能：

${r.join(`

`)}

`,s+=`当用户请求涉及技能相关内容时，请自动调用相应技能。
`),s}async function*tn(e,t,r=new Map){var b,x,j,f,p,m;const n=[{role:"system",content:zt(e,r)},{role:"user",content:t}],a=e.config.url.includes("api.fgw.sz.gov.cn")?"/api/chat/completions/stream":e.config.url,i=a.includes("/chat/completions")?a:`${a}/chat/completions`,l=await fetch(i,{method:"POST",headers:{Authorization:`Bearer ${e.config.api_key}`,"Content-Type":"application/json"},body:JSON.stringify({model:e.config.model,messages:n,temperature:.7,max_tokens:2e3,stream:!0})});if(!l.ok)throw new Error(`API错误: ${l.status} - ${l.statusText}`);if(!l.body)throw new Error("响应体为空");const h=l.body.getReader(),u=new TextDecoder;let d="";try{for(;;){const{done:g,value:v}=await h.read();if(g){if(d.trim())try{const S=((j=(x=(b=JSON.parse(d).choices)==null?void 0:b[0])==null?void 0:x.delta)==null?void 0:j.content)||"";S&&(yield{content:S,done:!1})}catch{}yield{content:"",done:!0};break}d+=u.decode(v,{stream:!0});const k=d.split(`
`);d=k.pop()||"";for(const y of k){const S=y.trim();if(!S||!S.startsWith("data: "))continue;if(S==="data: [DONE]"){yield{content:"",done:!0};return}const O=S.slice(6);try{const U=((m=(p=(f=JSON.parse(O).choices)==null?void 0:f[0])==null?void 0:p.delta)==null?void 0:m.content)||"";U&&(yield{content:U,done:!1})}catch{}}}}finally{h.releaseLock()}}async function rn(e,t,r=new Map){var i,l,h;const n=[{role:"system",content:zt(e,r)},{role:"user",content:t}],a=e.config.url.includes("api.fgw.sz.gov.cn")?"/api/chat/completions":e.config.url;try{return{content:((h=(l=(i=(await L.post(a.includes("/chat/completions")?a:`${a}/chat/completions`,{model:e.config.model,messages:n,temperature:.7,max_tokens:2e3},{headers:{Authorization:`Bearer ${e.config.api_key}`,"Content-Type":"application/json"},timeout:3e4})).data.choices)==null?void 0:i[0])==null?void 0:l.message)==null?void 0:h.content)||"",agent_id:e.id,skill_used:e.skills.length>0?e.skills[0].name:void 0}}catch(u){const d=u;return d.response?{content:"",agent_id:e.id,error:`API错误: ${d.response.status} - ${JSON.stringify(d.response.data)}`}:d.message==="Network Error"?{content:"",agent_id:e.id,error:"网络连接失败，请检查网络配置"}:{content:"",agent_id:e.id,error:`请求失败: ${d.message}`}}}async function sn(e){const t=new Map,r=new Set;for(const s of e)for(const n of s.skills)if(!r.has(n.name)){const a=await en(n.storage_path);a&&(t.set(n.name,a),r.add(n.name))}return t}const nn=()=>{_();const[e,t]=E.useState(!1),[r,s]=E.useState(null),[n,a]=E.useState(new Map),[i,l]=E.useState([]);E.useEffect(()=>{(async()=>{try{const b=await fetch("/config/agents.json");if(!b.ok)throw new Error("Failed to load config");const x=await b.json(),j=[];for(const p of x.agents)for(const m of p.agents)j.push(m);l(j);const f=await sn(j);a(f)}catch(b){console.error("Error loading agent config:",b)}})()},[]);const h=E.useCallback(async(d,b)=>{var j,f;const x=i.find(p=>p.id===d);if(!x)return s(`智能体 ${d} 未找到`),null;if(!((j=x.config)!=null&&j.url)||!((f=x.config)!=null&&f.api_key))return s(`智能体 ${x.name} 缺少API配置`),null;t(!0),s(null);try{const p=await rn(x,b,n);return p.error&&s(p.error),p}catch(p){const m=p instanceof Error?p.message:"发送消息失败";return s(m),null}finally{t(!1)}},[i,n]),u=E.useCallback(async(d,b,x)=>{var f,p;const j=i.find(m=>m.id===d);if(!j){x.onError(`智能体 ${d} 未找到`);return}if(!((f=j.config)!=null&&f.url)||!((p=j.config)!=null&&p.api_key)){x.onError(`智能体 ${j.name} 缺少API配置`);return}t(!0),s(null);try{let m="";for await(const g of tn(j,b,n)){if(g.done)break;m+=g.content,x.onChunk(g.content)}x.onDone(m)}catch(m){const g=m instanceof Error?m.message:"流式输出失败";s(g),x.onError(g)}finally{t(!1)}},[i,n]);return{sendMessage:h,streamMessage:u,isLoading:e,error:r}},on=({content:e,isUser:t,status:r="sent",skillActivated:s,thinkingContent:n,isStreaming:a,onRetry:i})=>{const{theme:l}=_(),[h,u]=E.useState(!1),[d,b]=E.useState(!1),x=()=>t?l==="dark"?"bg-gradient-to-br from-green-500 to-green-600 text-gray-900 rounded-tr-sm":"bg-[#95EC69] text-gray-900 rounded-tr-sm":l==="dark"?"bg-gray-700 text-white rounded-bl-sm":"bg-gray-200 text-gray-900 rounded-bl-sm",j=()=>l==="dark"?"bg-amber-900/30 border border-amber-700/50 text-amber-200":"bg-amber-50 border border-amber-200 text-amber-800",f=()=>l==="dark"?"bg-purple-600/20 text-purple-300 border border-purple-500/30":"bg-purple-100 text-purple-700 border border-purple-200",p=()=>n?o.jsxs("div",{className:`mb-3 rounded-lg border ${j()}`,children:[o.jsxs("button",{onClick:()=>u(!h),className:"w-full flex items-center justify-between px-3 py-2 cursor-pointer hover:opacity-80 transition-opacity",children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx($e,{className:"w-4 h-4"}),o.jsx("span",{className:"text-xs font-medium",children:"思考信息"})]}),h?o.jsx(nr,{className:"w-4 h-4"}):o.jsx(mt,{className:"w-4 h-4"})]}),o.jsx("div",{className:`overflow-hidden transition-all duration-300 ease-in-out ${h?"max-h-[500px] opacity-100":"max-h-0 opacity-0"}`,children:o.jsx("div",{className:"px-3 pb-3",children:o.jsx(Ge,{className:"text-sm leading-relaxed prose prose-sm max-w-none dark:prose-invert",children:n})})})]}):null,m=()=>s?o.jsxs("div",{className:`mb-2 px-2 py-1 rounded-md inline-flex items-center gap-1.5 ${f()}`,children:[o.jsx($e,{className:"w-3.5 h-3.5"}),o.jsxs("span",{className:"text-xs font-medium",children:["技能: ",s]}),o.jsx("span",{className:"text-xs opacity-70",children:"已激活"})]}):null,g=()=>t?l==="dark"?"p-1.5 rounded-md hover:bg-black/20 transition-colors cursor-pointer":"p-1.5 rounded-md hover:bg-black/10 transition-colors cursor-pointer":l==="dark"?"p-1.5 rounded-md hover:bg-white/10 transition-colors cursor-pointer":"p-1.5 rounded-md hover:bg-gray-300/50 transition-colors cursor-pointer",v=async()=>{try{await navigator.clipboard.writeText(e),b(!0),setTimeout(()=>b(!1),2e3)}catch(y){console.error("Copy failed:",y)}},k=()=>o.jsxs("div",{className:"flex items-center gap-1",children:[o.jsx("button",{onClick:v,className:g(),title:"复制内容",children:d?o.jsx(or,{className:"w-3.5 h-3.5 text-green-500"}):o.jsx(ar,{className:"w-3.5 h-3.5"})}),!t&&i&&o.jsx("button",{onClick:i,className:g(),title:"重新生成",children:o.jsx(ir,{className:"w-3.5 h-3.5"})})]});return o.jsxs("div",{className:`max-w-[800px] w-full px-4 py-2 rounded-lg break-words ${x()}`,children:[m(),p(),o.jsxs("div",{className:"text-sm leading-relaxed prose prose-sm max-w-none dark:prose-invert",children:[o.jsx(Ge,{children:e}),a&&o.jsx("span",{className:"inline-block w-2 h-4 bg-current animate-pulse ml-0.5"})]}),o.jsxs("div",{className:"flex items-center justify-end mt-2",children:[k(),t&&r==="failed"&&o.jsx("span",{className:"text-xs text-red-500 ml-2",children:o.jsx("svg",{className:"w-3.5 h-3.5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]})]})},an=["official-doc-optimize","code_generate","code_debug","code_optimize","todo_create","todo_update","todo_query"],ln=e=>e?an.some(t=>e.toLowerCase().includes(t.toLowerCase())):!1,cn=({agentId:e})=>{const{agents:t,chats:r,addMessage:s,updateMessageContent:n,setTyping:a,theme:i}=_(),{sendMessage:l,streamMessage:h,error:u}=nn(),[d,b]=E.useState(""),[x,j]=E.useState(!1),[f,p]=E.useState(!1),m=E.useRef(null),g=E.useRef(null),v=E.useRef(null),k=E.useRef(null),y=t.flatMap(w=>w.agents).find(w=>w.id===e),S=r[e]||{messages:[],isTyping:!1},O=()=>{var w;(w=g.current)==null||w.scrollIntoView({behavior:"smooth"})},R=()=>{if(!v.current)return;const{scrollTop:w,scrollHeight:T,clientHeight:A}=v.current,N=T-w-A<100;j(!N)};E.useEffect(()=>{O()},[S.messages.length,S.isTyping]),E.useEffect(()=>{const w=v.current;if(w)return w.addEventListener("scroll",R),()=>w.removeEventListener("scroll",R)},[]),E.useEffect(()=>{k.current&&k.current.focus()},[e]);const U=()=>{var N;if(!d.trim()||f)return;const w=d.trim();p(!0),s(e,{content:w,isUser:!0,status:"sending"}),b("");const T=(N=y==null?void 0:y.skills)==null?void 0:N[0];!ln(T)?W(w,T):M(w)},W=(w,T)=>{a(e,!0);const A=s(e,{content:"",isUser:!1,status:"sending",isStreaming:!0});m.current=A,h(e,w,{onChunk:N=>{if(m.current){const z=r[e],I=z==null?void 0:z.messages.find(ee=>ee.id===m.current),Z=((I==null?void 0:I.content)||"")+N;n(e,m.current,Z,!0)}},onDone:N=>{const z=m.current;a(e,!1),p(!1),m.current=null;const I=N.match(/【技能:\s*([^】]+)】/),Z=I?I[1]:T,ee=N.match(/(?:思考|分析|推理)[:：]\s*([\s\S]+?)(?=\n\n|$)/i),Te=ee?ee[1].trim():void 0,Xt=N.replace(/【技能:\s*[^】]+】\s*(已激活)?\n*/g,"").replace(/(?:思考|分析|推理)[:：]\s*[\s\S]+?(?=\n\n|$)/gi,"").trim();if(z){const Ae=_.getState().chats[e];Ae&&_.setState({chats:{..._.getState().chats,[e]:{...Ae,messages:Ae.messages.map(Oe=>Oe.id===z?{...Oe,content:Xt||N,status:"sent",skillActivated:Z,thinkingContent:Te,isStreaming:!1}:Oe)}}})}},onError:N=>{a(e,!1),p(!1),m.current=null,s(e,{content:N,isUser:!1,status:"failed"})}})},M=(w,T)=>{a(e,!0),l(e,w).then(A=>{if(a(e,!1),p(!1),A)if(A.error)s(e,{content:`错误: ${A.error}`,isUser:!1,status:"failed"});else{const N=A.content.match(/【技能:\s*([^】]+)】/),z=N?N[1]:A.skill_used,I=A.content.match(/(?:思考|分析|推理)[:：]\s*([\s\S]+?)(?=\n\n|$)/i),Z=I?I[1].trim():void 0,ee=A.content.replace(/【技能:\s*[^】]+】\s*(已激活)?\n*/g,"").replace(/(?:思考|分析|推理)[:：]\s*[\s\S]+?(?=\n\n|$)/gi,"").trim();s(e,{content:ee||A.content,isUser:!1,status:"sent",skillActivated:z,thinkingContent:Z}),A.skill_used&&console.log(`Used skill: ${A.skill_used}`)}else s(e,{content:u||"发送消息失败，请稍后重试",isUser:!1,status:"failed"})}).catch(A=>{a(e,!1),p(!1),s(e,{content:A instanceof Error?A.message:"发送消息失败，请稍后重试",isUser:!1,status:"failed"})})},J=()=>{p(!1),a(e,!1),m.current=null},V=()=>{const w=r[e];if(!w||w.messages.length===0||f)return;let T="";for(let N=w.messages.length-1;N>=0;N--)if(w.messages[N].isUser){T=w.messages[N].content;break}!T||!_.getState().removeLastAiMessage(e)||(p(!0),a(e,!0),l(e,T).then(N=>{if(a(e,!1),p(!1),N)if(N.error)s(e,{content:`错误: ${N.error}`,isUser:!1,status:"failed"});else{const z=N.content.match(/【技能:\s*([^】]+)】/),I=z?z[1]:N.skill_used,Z=N.content.match(/(?:思考|分析|推理)[:：]\s*([\s\S]+?)(?=\n\n|$)/i),ee=Z?Z[1].trim():void 0,Te=N.content.replace(/【技能:\s*[^】]+】\s*(已激活)?\n*/g,"").replace(/(?:思考|分析|推理)[:：]\s*[\s\S]+?(?=\n\n|$)/gi,"").trim();s(e,{content:Te||N.content,isUser:!1,status:"sent",skillActivated:I,thinkingContent:ee})}else s(e,{content:u||"重新生成失败，请稍后重试",isUser:!1,status:"failed"})}).catch(N=>{a(e,!1),p(!1),s(e,{content:N instanceof Error?N.message:"重新生成失败，请稍后重试",isUser:!1,status:"failed"})}))},X=w=>{w.key==="Enter"&&!w.shiftKey&&(w.preventDefault(),U())},F=w=>{const T=w.target;b(T.value),T.style.height="auto";const A=Math.min(300,Math.max(100,T.scrollHeight));T.style.height=`${A}px`},ne=()=>{let w="flex-1 flex flex-col h-screen";return w+=i==="dark"?" bg-gray-900":" bg-white",w},D=()=>{let w="h-16 border-b flex items-center px-4";return w+=i==="dark"?" border-gray-700 bg-gray-800":" border-gray-200 bg-white",w},me=()=>"flex-1 overflow-y-auto p-4 space-y-4",K=()=>{let w="flex items-center justify-center h-full";return w+=i==="dark"?" text-gray-500":" text-gray-400",w},pe=(w,T)=>{if(!T)return!0;const A=new Date(w.timestamp),N=new Date(T.timestamp);return(A.getTime()-N.getTime())/(1e3*60)>=1},Re=w=>{const T=new Date(w),A=new Date;return T.toDateString()===A.toDateString()?T.toLocaleTimeString("zh-CN",{hour:"2-digit",minute:"2-digit"}):T.toLocaleDateString("zh-CN",{month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit"})},G=()=>"flex justify-center my-4",Q=()=>i==="dark"?"bg-gray-700 text-gray-400 text-xs px-3 py-1 rounded-full":"bg-gray-200 text-gray-500 text-xs px-3 py-1 rounded-full",ie=()=>i==="dark"?"bg-gray-700 px-4 py-2 rounded-lg rounded-bl-sm":"bg-gray-200 px-4 py-2 rounded-lg rounded-bl-sm",Y=()=>i==="dark"?"w-2 h-2 bg-gray-500 rounded-full animate-typing-bounce":"w-2 h-2 bg-gray-400 rounded-full animate-typing-bounce",ge=()=>{let w="border-t p-4";return w+=i==="dark"?" border-gray-700 bg-gray-800":" border-gray-200 bg-white",w},It=()=>{let w="border rounded-lg overflow-hidden";return w+=i==="dark"?" border-gray-600":" border-gray-300",w},Je=w=>{switch(w){case"purple":return"from-purple-400 to-purple-600";case"orange":return"from-orange-400 to-orange-600";default:return"from-blue-400 to-blue-600"}},Ve=w=>{switch(w){case"purple":return o.jsx("svg",{className:"w-6 h-6 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10 20l4-16m4 4l4 4-4 4M6 16l-4-4 4-4"})});case"orange":return o.jsx("svg",{className:"w-6 h-6 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-6 9l2 2 4-4"})});default:return o.jsx("svg",{className:"w-6 h-6 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9.75 17L9 20l-1 1h8l-1-1-.75-3M3 13h18M5 17h14a2 2 0 002-2V5a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"})})}},Ht=()=>i==="dark"?"w-10 h-10 rounded-full bg-gradient-to-br from-blue-400 to-blue-600 flex-shrink-0 shadow-lg flex items-center justify-center":"w-10 h-10 rounded-full bg-gradient-to-br from-blue-400 to-blue-600 flex-shrink-0 shadow-md flex items-center justify-center",qt=()=>{const w=(y==null?void 0:y.avatarColor)||"blue",T=Je(w);return i==="dark"?`w-10 h-10 rounded-full bg-gradient-to-br ${T} flex-shrink-0 shadow-lg flex items-center justify-center`:`w-10 h-10 rounded-full bg-gradient-to-br ${T} flex-shrink-0 shadow-md flex items-center justify-center`},Wt=w=>`flex ${w?"justify-end":"justify-start"} items-start gap-2`,Jt=()=>i==="dark"?"w-10 h-10 rounded-full hover:bg-gray-600 transition-all duration-300 flex items-center justify-center shadow-md hover:shadow-lg hover:scale-105":"w-10 h-10 rounded-full hover:bg-gray-200 transition-all duration-300 flex items-center justify-center shadow-md hover:shadow-lg hover:scale-105",Vt=()=>i==="dark"?"w-full bg-gray-700 text-white px-4 py-3 focus:outline-none placeholder-gray-400 resize-none scrollbar-thin border-none flex-grow":"w-full bg-white text-gray-900 px-4 py-3 focus:outline-none placeholder-gray-400 resize-none scrollbar-thin border-none flex-grow",Kt=()=>i==="dark"?"flex items-center justify-between p-1 bg-gray-700":"flex items-center justify-between p-1",Gt=()=>S.isTyping||f?"w-10 h-10 rounded-full bg-gradient-to-br from-red-500 to-red-600 hover:from-red-600 hover:to-red-700 transition-all duration-300 flex items-center justify-center shadow-lg hover:shadow-xl hover:scale-105 cursor-pointer":d.trim()?"w-10 h-10 rounded-full bg-gradient-to-br from-blue-500 to-blue-600 hover:from-blue-600 hover:to-blue-700 transition-all duration-300 flex items-center justify-center shadow-lg hover:shadow-xl hover:scale-105 cursor-pointer":i==="dark"?"w-10 h-10 rounded-full bg-gradient-to-br from-gray-600 to-gray-700 transition-all duration-300 flex items-center justify-center shadow-lg cursor-not-allowed opacity-50":"w-10 h-10 rounded-full bg-gradient-to-br from-gray-300 to-gray-400 transition-all duration-300 flex items-center justify-center shadow-lg cursor-not-allowed opacity-50";return o.jsxs("div",{className:ne(),children:[o.jsx("header",{className:D(),children:o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx("div",{className:`w-10 h-10 bg-gradient-to-br ${y?Je(y.avatarColor):"from-blue-400 to-blue-600"} rounded-lg flex items-center justify-center transition-all duration-300 group-hover:scale-110 group-hover:shadow-lg group-hover:shadow-blue-500/30 flex-shrink-0`,children:y?Ve(y.avatarColor):o.jsx("svg",{className:"w-6 h-6 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9.75 17L9 20l-1 1h8l-1-1-.75-3M3 13h18M5 17h14a2 2 0 002-2V5a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"})})}),o.jsxs("div",{children:[o.jsx("h1",{className:`text-lg font-semibold ${i==="dark"?"text-white":"text-gray-900"}`,children:(y==null?void 0:y.name)||"智能体"}),o.jsx("p",{className:`text-sm ${i==="dark"?"text-gray-400":"text-gray-500"}`,children:(y==null?void 0:y.description)||"智能体描述"})]})]})}),o.jsxs("div",{ref:v,className:me(),children:[S.messages.length===0&&o.jsx("div",{className:K(),children:o.jsx("p",{children:"开始与智能体对话吧！"})}),S.messages.map((w,T)=>{const A=S.messages[T-1],N=pe(w,A);return o.jsxs(gt.Fragment,{children:[N&&o.jsx("div",{className:G(),children:o.jsx("span",{className:Q(),children:Re(w.timestamp)})}),o.jsxs("div",{className:Wt(w.isUser),children:[!w.isUser&&o.jsx("div",{className:qt(),children:y?Ve(y.avatarColor):o.jsx("svg",{className:"w-6 h-6 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9.75 17L9 20l-1 1h8l-1-1-.75-3M3 13h18M5 17h14a2 2 0 002-2V5a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"})})}),o.jsx(on,{content:w.content,isUser:w.isUser,status:w.status,skillActivated:w.skillActivated,thinkingContent:w.thinkingContent,isStreaming:w.isStreaming,onRetry:w.isUser?void 0:V}),w.isUser&&o.jsx("div",{className:Ht(),children:o.jsx("svg",{className:"w-6 h-6 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})})})]})]},w.id)}),S.isTyping&&o.jsx("div",{className:"flex justify-start",children:o.jsx("div",{className:ie(),children:o.jsxs("div",{className:"flex gap-1",children:[o.jsx("div",{className:Y(),style:{animationDelay:"0ms"}}),o.jsx("div",{className:Y(),style:{animationDelay:"150ms"}}),o.jsx("div",{className:Y(),style:{animationDelay:"300ms"}})]})})}),o.jsx("div",{ref:g})]}),x&&o.jsx("button",{onClick:O,className:"absolute bottom-36 left-1/2 -translate-x-1/2 w-12 h-12 bg-gradient-to-r from-blue-500 to-purple-500 rounded-full shadow-lg hover:shadow-xl transition-all duration-300 hover:scale-110 z-50 cursor-pointer flex items-center justify-center",title:"滚动到底部",children:o.jsx("svg",{className:"w-6 h-6 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 14l-7 7m0 0l-7-7m7 7V3"})})}),o.jsx("div",{className:ge(),children:o.jsxs("div",{className:It(),children:[o.jsx("div",{className:"relative flex flex-grow",children:o.jsx("textarea",{ref:k,id:`message-input-${e}`,placeholder:"输入消息...",value:d,onChange:F,onKeyDown:X,className:Vt(),style:{minHeight:"100px",maxHeight:"300px"},rows:1})}),o.jsxs("div",{className:Kt(),children:[o.jsx("div",{className:"flex items-center gap-2",children:o.jsx("button",{className:Jt(),"aria-label":"添加附件",children:o.jsx(lr,{className:"w-5 h-5 text-gray-400"})})}),o.jsx("div",{children:o.jsx("button",{id:`send-btn-${e}`,onClick:S.isTyping||f?J:U,className:Gt(),title:S.isTyping||f?"停止生成":"发送消息",children:S.isTyping||f?o.jsx(cr,{className:"w-5 h-5 text-white"}):o.jsx(dr,{className:"w-5 h-5 text-white"})})})]})]})})]})},dn=()=>{const{agentId:e}=mr();return e?o.jsx(cn,{agentId:e}):o.jsx(xt,{to:"/",replace:!0})},un=()=>{const{userSettings:e,setTheme:t,setThemeConfig:r}=_(),{theme:s,themeConfig:n}=e,[a,i]=E.useState(n),l={primaryColor:"#3b82f6",secondaryColor:"#8b5cf6",textColor:"#1f2937",backgroundColor:"#ffffff",borderColor:"#e5e7eb",fontSize:"16px",fontWeight:"400",animationEnabled:!0,animationDuration:"300ms"},h={primaryColor:"#60a5fa",secondaryColor:"#a78bfa",textColor:"#f9fafb",backgroundColor:"#111827",borderColor:"#4b5563",fontSize:"16px",fontWeight:"400",animationEnabled:!0,animationDuration:"300ms"},u=g=>{t(g),i(g==="light"?l:h),r(g==="light"?l:h)},d=(g,v)=>{const k={...a,[g]:v};i(k),r(k)},b=()=>{const g=s==="light"?l:h;i(g),r(g)},x=g=>s===g?"flex-1 px-4 py-2 rounded-lg transition-colors bg-blue-500 text-white":s==="dark"?"flex-1 px-4 py-2 rounded-lg transition-colors bg-gray-700 text-white hover:bg-gray-600":"flex-1 px-4 py-2 rounded-lg transition-colors bg-gray-200 text-gray-900 hover:bg-gray-300",j=()=>s==="dark"?"w-full px-4 py-2 rounded-lg bg-gray-700 text-white border border-gray-600":"w-full px-4 py-2 rounded-lg bg-white text-gray-900 border border-gray-200",f=()=>s==="dark"?"flex-1 px-4 py-2 rounded-lg bg-gray-700 text-white hover:bg-gray-600 transition-colors":"flex-1 px-4 py-2 rounded-lg bg-gray-200 text-gray-900 hover:bg-gray-300 transition-colors",p=()=>{const g={theme:s,themeConfig:a},v=new Blob([JSON.stringify(g,null,2)],{type:"application/json"}),k=URL.createObjectURL(v),y=document.createElement("a");y.href=k,y.download=`automate-theme-${Date.now()}.json`,y.click(),URL.revokeObjectURL(k)},m=g=>{var y;const v=(y=g.target.files)==null?void 0:y[0];if(!v)return;const k=new FileReader;k.onload=S=>{var O;try{const R=JSON.parse((O=S.target)==null?void 0:O.result);R.theme&&R.themeConfig&&(t(R.theme),i(R.themeConfig),r(R.themeConfig))}catch(R){console.error("导入主题配置失败:",R),alert("导入失败：文件格式不正确")}},k.readAsText(v)};return o.jsxs("div",{className:"p-6 space-y-6",children:[o.jsx("h2",{className:"text-2xl font-bold mb-6",children:"主题设置"}),o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium mb-2",children:"主题模式"}),o.jsxs("div",{className:"flex gap-2",children:[o.jsx("button",{onClick:()=>u("light"),className:x("light"),children:"浅色"}),o.jsx("button",{onClick:()=>u("dark"),className:x("dark"),children:"深色"})]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium mb-2",children:"主色调"}),o.jsx("input",{type:"color",value:a.primaryColor,onChange:g=>d("primaryColor",g.target.value),className:"w-full h-10 rounded-lg cursor-pointer"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium mb-2",children:"辅助色"}),o.jsx("input",{type:"color",value:a.secondaryColor,onChange:g=>d("secondaryColor",g.target.value),className:"w-full h-10 rounded-lg cursor-pointer"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium mb-2",children:"文本颜色"}),o.jsx("input",{type:"color",value:a.textColor,onChange:g=>d("textColor",g.target.value),className:"w-full h-10 rounded-lg cursor-pointer"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium mb-2",children:"背景颜色"}),o.jsx("input",{type:"color",value:a.backgroundColor,onChange:g=>d("backgroundColor",g.target.value),className:"w-full h-10 rounded-lg cursor-pointer"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium mb-2",children:"边框颜色"}),o.jsx("input",{type:"color",value:a.borderColor,onChange:g=>d("borderColor",g.target.value),className:"w-full h-10 rounded-lg cursor-pointer"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium mb-2",children:"字体大小"}),o.jsxs("select",{value:a.fontSize,onChange:g=>d("fontSize",g.target.value),className:j(),children:[o.jsx("option",{value:"14px",children:"14px"}),o.jsx("option",{value:"16px",children:"16px"}),o.jsx("option",{value:"18px",children:"18px"}),o.jsx("option",{value:"20px",children:"20px"})]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium mb-2",children:"字体粗细"}),o.jsxs("select",{value:a.fontWeight,onChange:g=>d("fontWeight",g.target.value),className:j(),children:[o.jsx("option",{value:"400",children:"常规"}),o.jsx("option",{value:"500",children:"中等"}),o.jsx("option",{value:"600",children:"半粗"}),o.jsx("option",{value:"700",children:"粗体"})]})]}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("input",{type:"checkbox",id:"animation-enabled",checked:a.animationEnabled,onChange:g=>d("animationEnabled",g.target.checked),className:"w-4 h-4"}),o.jsx("label",{htmlFor:"animation-enabled",className:"text-sm font-medium",children:"启用动画"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium mb-2",children:"动画时长"}),o.jsxs("select",{value:a.animationDuration,onChange:g=>d("animationDuration",g.target.value),className:j(),children:[o.jsx("option",{value:"150ms",children:"150ms"}),o.jsx("option",{value:"300ms",children:"300ms"}),o.jsx("option",{value:"500ms",children:"500ms"})]})]})]}),o.jsxs("div",{className:"flex gap-4",children:[o.jsx("button",{onClick:b,className:f(),children:"重置默认"}),o.jsx("button",{onClick:p,className:"flex-1 px-4 py-2 rounded-lg bg-blue-500 text-white hover:bg-blue-600 transition-colors",children:"导出主题"}),o.jsxs("label",{className:"flex-1 px-4 py-2 rounded-lg bg-green-500 text-white hover:bg-green-600 transition-colors cursor-pointer text-center",children:["导入主题",o.jsx("input",{type:"file",accept:".json",onChange:m,className:"hidden"})]})]})]})},fn=()=>{const{userSettings:e,themeConfig:t,theme:r}=_(),[s,n]=E.useState(""),[a,i]=E.useState(!1),l=()=>r==="dark"?"text-sm text-gray-400 mb-4":"text-sm text-gray-600 mb-4",h=()=>r==="dark"?"mt-3 text-sm text-green-400":"mt-3 text-sm text-green-600",u=()=>r==="dark"?"mt-3 text-sm text-red-400":"mt-3 text-sm text-red-600",d=()=>r==="dark"?"mt-6 p-4 bg-gray-800 rounded-lg":"mt-6 p-4 bg-gray-100 rounded-lg",b=()=>"text-sm font-semibold mb-2",x=()=>r==="dark"?"text-xs text-gray-300 overflow-x-auto":"text-xs text-gray-700 overflow-x-auto",j=()=>{try{const p={theme:e.theme,themeConfig:t,exportDate:new Date().toISOString()},m=new Blob([JSON.stringify(p,null,2)],{type:"application/json"}),g=URL.createObjectURL(m),v=document.createElement("a");v.href=g,v.download=`automate-theme-${Date.now()}.json`,v.click(),URL.revokeObjectURL(g),i(!0),setTimeout(()=>i(!1),3e3)}catch(p){console.error("导出主题配置失败:",p),alert("导出失败："+p.message)}},f=p=>{var v;const m=(v=p.target.files)==null?void 0:v[0];if(!m)return;n("");const g=new FileReader;g.onload=k=>{var y;try{const S=(y=k.target)==null?void 0:y.result,O=JSON.parse(S);if(!O.theme||!O.themeConfig){n("文件格式错误：缺少主题或主题配置数据");return}if(!["light","dark"].includes(O.theme)){n("文件格式错误：主题模式必须是 light 或 dark");return}const U=["primaryColor","secondaryColor","textColor","backgroundColor","borderColor"].filter(W=>!O.themeConfig[W]);if(U.length>0){n(`文件格式错误：缺少必需字段 ${U.join(", ")}`);return}n(""),alert("主题配置导入成功！")}catch(S){console.error("导入主题配置失败:",S),S.message.includes("JSON")?n("文件格式错误：请选择有效的JSON文件"):n("文件格式错误："+S.message)}},g.readAsText(m)};return o.jsxs("div",{className:"p-6 space-y-4",children:[o.jsx("h2",{className:"text-2xl font-bold mb-6",children:"主题导入/导出"}),o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{children:[o.jsx("h3",{className:"text-lg font-semibold mb-3",children:"导出当前主题"}),o.jsx("p",{className:l(),children:"将当前主题配置导出为JSON文件，方便备份或分享"}),o.jsxs("button",{onClick:j,className:"flex items-center gap-2 px-4 py-3 rounded-lg bg-blue-500 text-white hover:bg-blue-600 transition-colors",children:[o.jsx(ur,{className:"w-5 h-5"}),"导出主题配置"]}),a&&o.jsx("div",{className:h(),children:"✓ 主题配置已成功导出"})]}),o.jsxs("div",{children:[o.jsx("h3",{className:"text-lg font-semibold mb-3",children:"导入主题配置"}),o.jsx("p",{className:l(),children:"从JSON文件导入主题配置，恢复或应用自定义主题"}),o.jsxs("label",{className:"flex items-center gap-2 px-4 py-3 rounded-lg bg-green-500 text-white hover:bg-green-600 transition-colors cursor-pointer",children:[o.jsx(fr,{className:"w-5 h-5"}),o.jsx("span",{children:"选择主题配置文件"}),o.jsx("input",{type:"file",accept:".json",onChange:f,className:"hidden"})]}),s&&o.jsxs("div",{className:u(),children:["✗ ",s]})]})]}),o.jsxs("div",{className:d(),children:[o.jsx("h4",{className:b(),children:"文件格式说明"}),o.jsx("pre",{className:x(),children:`{
  "theme": "light" | "dark",
  "themeConfig": {
    "primaryColor": "#3b82f6",
    "secondaryColor": "#8b5cf6",
    "textColor": "#1f2937",
    "backgroundColor": "#ffffff",
    "borderColor": "#e5e7eb",
    "fontSize": "16px",
    "fontWeight": "400",
    "animationEnabled": true,
    "animationDuration": "300ms"
  }
}`})]})]})},hn=()=>{const{theme:e}=_(),t=()=>{let s="min-h-screen p-8";return s+=e==="dark"?" bg-gray-900":" bg-white",s},r=()=>e==="dark"?"text-3xl font-bold text-white mb-8":"text-3xl font-bold text-gray-900 mb-8";return o.jsx("div",{className:t(),children:o.jsxs("div",{className:"max-w-4xl mx-auto",children:[o.jsx("h1",{className:r(),children:"设置"}),o.jsxs("div",{className:"space-y-8",children:[o.jsx(un,{}),o.jsx(fn,{})]})]})})},mn=pr([{path:"/",element:o.jsx(Le,{children:o.jsx(kr,{})})},{path:"/agent/:agentId",element:o.jsx(Le,{children:o.jsx(dn,{})})},{path:"/settings",element:o.jsx(Le,{children:o.jsx(hn,{})})},{path:"*",element:o.jsx(xt,{to:"/",replace:!0})}]);function pn(){return o.jsx(gr,{router:mn})}bt(document.getElementById("root")).render(o.jsx(E.StrictMode,{children:o.jsx(pn,{})}));
//# sourceMappingURL=index-BCLA_gwn.js.map
