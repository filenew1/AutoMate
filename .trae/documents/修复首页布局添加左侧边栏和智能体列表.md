# 修复首页布局添加左侧边栏和智能体列表

## 问题分析

当前 WelcomePage.tsx 是一个独立的页面，没有左侧边栏和智能体列表。根据原型设计（MainLayout.html），应该有以下结构：

### 原型布局结构
- **左侧边栏**（sidebar）：
  - 搜索框
  - 智能体分组列表
  - 底部设置按钮（主题、设置）
  
- **主内容区**（main）：
  - 顶部栏（标题、用户信息）
  - 内容容器
    - 欢迎页内容（当未选择智能体时显示）
    - 聊天窗口（当选择智能体时显示）

### 当前实现问题
- WelcomePage.tsx 是一个独立的欢迎页
- 没有左侧边栏
- 没有智能体列表
- 没有顶部栏
- 布局结构与原型完全不同

## 修复计划

### 步骤 1：创建主布局组件（MainLayout）
创建一个新的 MainLayout 组件，包含：
- 左侧边栏（Sidebar 组件）
- 主内容区（children）
- 顶部栏（Header 组件）
- 移动端菜单按钮和遮罩层

### 步骤 2：创建顶部栏组件（Header）
创建 Header 组件，包含：
- 移动端菜单按钮
- 应用标题和副标题
- 用户头像和欢迎信息

### 步骤 3：创建左侧边栏组件（Sidebar）
创建 Sidebar 组件，包含：
- 搜索框
- 智能体分组列表（从 useAppStore 获取数据）
- 底部设置按钮（主题切换、设置）
- 侧边栏收缩功能
- 拖拽调整宽度功能

### 步骤 4：重构 WelcomePage
将 WelcomePage 改为只包含欢迎内容，移除：
- 外层布局容器
- 背景样式
- 只保留欢迎页的核心内容（图标、标题、描述、统计卡片、快速开始引导）

### 步骤 5：更新路由配置
修改路由配置，使用 MainLayout 包装所有页面：
- 首页路由使用 MainLayout + WelcomePage
- 聊天页路由使用 MainLayout + AgentChatPage
- 设置页路由使用 MainLayout + SettingsPage

### 步骤 6：实现智能体数据加载
在 MainLayout 或 Sidebar 中实现：
- 从 /config/agents.json 加载智能体配置
- 更新 useAppStore 中的 agents 数据
- 处理加载错误情况

### 步骤 7：实现智能体选择功能
在 Sidebar 中实现：
- 点击智能体项时更新 selectedAgentId
- 隐藏欢迎页，显示对应的聊天窗口
- 更新顶部栏的标题和头像

### 步骤 8：实现主题切换功能
在 Sidebar 中实现：
- 点击主题按钮切换 light/dark 主题
- 更新 useAppStore 中的 theme 配置
- 应用主题样式到整个应用

### 步骤 9：实现侧边栏收缩功能
在 Sidebar 中实现：
- 点击收缩按钮切换侧边栏宽度
- 保存收缩状态到 localStorage
- 移动端通过菜单按钮打开/关闭侧边栏

### 步骤 10：测试验证
- 在浏览器中测试所有功能
- 验证布局与原型一致
- 测试浅色和深色主题切换
- 测试智能体选择和聊天窗口显示
- 测试响应式布局（移动端）

## 验收标准

1. 首页有左侧边栏，包含智能体列表
2. 左侧边栏有搜索框、智能体分组、底部设置按钮
3. 右侧内容区有顶部栏（标题、用户信息）
4. 欢迎页在右侧内容区，与原型样式一致
5. 点击智能体后，欢迎页隐藏，显示聊天窗口
6. 主题切换功能正常工作
7. 侧边栏可以收缩和调整宽度
8. 移动端响应式布局正常
9. UI 还原度 ≥ 95%
