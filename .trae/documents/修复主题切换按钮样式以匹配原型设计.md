# 修复主题切换按钮样式以匹配原型设计

## 问题描述

当前主题切换按钮的样式和行为与原型设计不一致，主要问题包括：

1. **悬停背景色问题**：当前使用 `hover:bg-gray-200 dark:hover:bg-gray-700`，但 `dark:` 修饰符依赖于 HTML 元素上的 `dark` 类，而不是实际的主题状态
2. **文本颜色问题**：文本颜色使用 `dark:text-gray-300`，同样依赖于 `dark` 类而不是实际主题
3. **图标颜色问题**：图标颜色也使用了 `dark:` 修饰符，导致颜色切换不正确

## 原型设计规范

根据 [MainLayout.html](../../prototypes/MainLayout.html) 原型设计：

### 浅色主题
- 图标：太阳图标
- 悬停背景色：`hover:bg-gray-200`
- 文本颜色：`text-gray-600`
- 图标颜色：`text-gray-400`

### 深色主题
- 图标：月亮图标
- 悬停背景色：`hover:bg-gray-700`
- 文本颜色：`text-gray-300`
- 图标颜色：`text-gray-300`

## 修复方案

### 修改文件
- `src/components/theme/ThemeToggle.tsx`

### 修改内容

1. **移除 `dark:` 修饰符**：不依赖 Tailwind 的 `dark:` 修饰符，而是根据实际主题状态动态设置样式类名

2. **使用条件渲染设置样式**：
   - 根据 `theme` 状态动态设置按钮的 `hover:bg-` 类
   - 根据 `theme` 状态动态设置文本的 `text-` 类
   - 根据 `theme` 状态动态设置图标的 `text-` 类

3. **保持图标切换逻辑**：
   - 浅色主题显示 `Sun` 图标
   - 深色主题显示 `Moon` 图标

### 具体实现

```tsx
<button
  onClick={handleToggle}
  className={`flex items-center gap-2 px-3 py-2 rounded-lg transition-colors ${
    theme === 'light'
      ? 'hover:bg-gray-200'
      : 'hover:bg-gray-700'
  }`}
  aria-label="切换主题"
  title="主题"
>
  {theme === 'light' ? (
    <Sun className="w-4 h-4 text-gray-400 transition-transform duration-300" />
  ) : (
    <Moon className="w-4 h-4 text-gray-300 transition-transform duration-300" />
  )}
  <span className={`text-sm ${
    theme === 'light'
      ? 'text-gray-600'
      : 'text-gray-300'
  }`}>
    主题
  </span>
</button>
```

## 验收标准

1. ✅ 浅色主题时，按钮悬停背景色为 `#f9fafb` (gray-200)
2. ✅ 深色主题时，按钮悬停背景色为 `#374151` (gray-700)
3. ✅ 浅色主题时，文本颜色为 `#4b5563` (gray-600)
4. ✅ 深色主题时，文本颜色为 `#d1d5db` (gray-300)
5. ✅ 浅色主题时，图标颜色为 `#9ca3af` (gray-400)
6. ✅ 深色主题时，图标颜色为 `#d1d5db` (gray-300)
7. ✅ 浅色主题显示太阳图标，深色主题显示月亮图标
8. ✅ 主题切换过渡动画流畅（300ms）
9. ✅ 在主流浏览器中无兼容性问题

## 测试计划

1. 启动开发服务器
2. 打开浏览器访问应用
3. 点击主题切换按钮，验证：
   - 浅色主题下，悬停按钮时背景色变为浅灰色
   - 深色主题下，悬停按钮时背景色变为深灰色
   - 文本颜色和图标颜色根据主题正确切换
   - 图标从太阳切换到月亮（或反之）
4. 多次切换主题，验证切换流畅且无闪烁

## 相关文档

- [主题模块设计文档](../../docs/业务功能模块/主题模块.md)
- [MainLayout.html 原型](../../prototypes/MainLayout.html)
