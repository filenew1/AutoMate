# 命名规范

本文档定义了AutoMate项目中变量、函数、表名、接口、文件等的全局命名规则。所有开发人员必须遵守这些规范，以确保代码的一致性和可维护性。

## 1. 通用命名原则

### 1.1 基本原则

- **清晰性**：命名应该清晰表达其用途和含义
- **一致性**：相同类型的实体使用相同的命名风格
- **简洁性**：在保证清晰的前提下，尽量简洁
- **避免缩写**：除非是广泛认知的缩写（如id、url、api）
- **避免中文拼音**：使用英文命名，避免使用中文拼音

### 1.2 语言选择

- 所有命名使用英文
- 避免使用中文拼音
- 特殊情况下（如专有名词）可以使用中文，但需在注释中说明

## 2. 前端命名规范（React + TypeScript）

### 2.1 文件命名

**组件文件：**

- 使用PascalCase（大驼峰命名法）
- 示例：`AgentList.tsx`, `ChatWindow.tsx`, `MessageBubble.tsx`

**工具函数文件：**

- 使用camelCase（小驼峰命名法）
- 示例：`formatDate.ts`, `validateInput.ts`, `encryptData.ts`

**类型定义文件：**

- 使用PascalCase，以`.types.ts`或`.d.ts`结尾
- 示例：`Agent.types.ts`, `Message.d.ts`

**常量文件：**

- 使用camelCase，以`.constants.ts`结尾
- 示例：`theme.constants.ts`, `api.constants.ts`

**样式文件：**

- 使用kebab-case（短横线命名法）
- 示例：`agent-list.css`, `chat-window.css`

### 2.2 组件命名

**函数组件：**

- 使用PascalCase
- 示例：`AgentList`, `ChatWindow`, `MessageBubble`

**自定义Hook：**

- 以`use`开头，使用camelCase
- 示例：`useAgentList`, `useChatMessages`, `useTheme`

**Context：**

- 以`Context`结尾，使用PascalCase
- 示例：`AgentContext`, `ThemeContext`, `ChatContext`

**Provider：**

- 以`Provider`结尾，使用PascalCase
- 示例：`AgentProvider`, `ThemeProvider`, `ChatProvider`

### 2.3 变量和函数命名

**变量：**

- 使用camelCase
- 示例：`agentList`, `chatMessages`, `currentTheme`

**常量：**

- 使用UPPER_SNAKE_CASE（全大写下划线命名）
- 示例：`MAX_MESSAGE_LENGTH`, `DEFAULT_THEME`, `API_BASE_URL`

**函数：**

- 使用camelCase，以动词开头
- 示例：`sendMessage`, `loadAgents`, `updateTheme`

**事件处理函数：**

- 以`handle`开头，使用camelCase
- 示例：`handleSendMessage`, `handleAgentClick`, `handleThemeToggle`

**回调函数：**

- 以`on`开头，使用camelCase
- 示例：`onMessageSend`, `onAgentSelect`, `onThemeChange`

### 2.4 TypeScript类型命名

**接口：**

- 使用PascalCase，以`I`开头（可选）
- 示例：`Agent`, `Message`, `ChatState` 或 `IAgent`, `IMessage`, `IChatState`

**类型别名：**

- 使用PascalCase
- 示例：`AgentType`, `MessageType`, `ThemeType`

**枚举：**

- 使用PascalCase，成员使用UPPER_SNAKE_CASE
- 示例：
  ```typescript
  enum MessageStatus {
    SENT = 'sent',
    DELIVERED = 'delivered',
    READ = 'read',
    FAILED = 'failed'
  }
  ```

**泛型：**

- 使用单个大写字母，通常为`T`
- 示例：`function identity<T>(arg: T): T`

### 2.5 CSS类名命名

- 使用kebab-case
- 使用BEM（Block Element Modifier）命名规范
- 示例：`.agent-list`, `.agent-list__item`, `.agent-list__item--selected`

## 3. 后端命名规范（Python + FastAPI）

### 3.1 文件命名

- 使用snake_case（下划线命名法）
- 示例：`agent_service.py`, `chat_controller.py`, `database.py`

### 3.2 类命名

- 使用PascalCase
- 示例：`AgentService`, `ChatController`, `DatabaseManager`

### 3.3 函数和方法命名

**普通函数：**

- 使用snake_case，以动词开头
- 示例：`send_message`, `load_agents`, `update_theme`

**类方法：**

- 使用snake_case，以动词开头
- 示例：`get_agent_list`, `save_chat_message`, `delete_file`

**私有方法：**

- 以`_`开头，使用snake_case
- 示例：`_validate_input`, `_encrypt_data`, `_format_response`

**特殊方法：**

- 使用双下划线包围，使用snake_case
- 示例：`__init__`, `__str__`, `__repr__`

### 3.4 变量命名

**普通变量：**

- 使用snake_case
- 示例：`agent_list`, `chat_messages`, `current_theme`

**常量：**

- 使用UPPER_SNAKE_CASE
- 示例：`MAX_MESSAGE_LENGTH`, `DEFAULT_THEME`, `API_BASE_URL`

**私有变量：**

- 以`_`开头，使用snake_case
- 示例：`_db_connection`, `_api_key`, `_config`

### 3.5 API路由命名

- 使用snake_case
- 使用RESTful风格
- 示例：
  - `/api/agents` - 获取智能体列表
  - `/api/agents/{agent_id}` - 获取特定智能体
  - `/api/messages` - 发送消息
  - `/api/messages/{message_id}` - 获取特定消息

## 4. 数据库命名规范（SQLite）

### 4.1 表名命名

- 使用snake_case，复数形式
- 示例：`chat_messages`, `skill_calls`, `agent_states`, `file_attachments`

### 4.2 字段命名

- 使用snake_case
- 示例：`agent_id`, `message_content`, `send_time`, `created_at`

**主键：**

- 使用`id`或`{table_name}_id`
- 示例：`id`, `message_id`

**外键：**

- 使用`{referenced_table}_id`
- 示例：`agent_id`, `message_id`

**时间字段：**

- 使用`_time`或`_at`后缀
- 示例：`send_time`, `created_at`, `updated_at`

**布尔字段：**

- 使用`is_`或`has_`前缀
- 示例：`is_online`, `has_attachment`, `is_deleted`

### 4.3 索引命名

- 使用`idx_`前缀，使用snake_case
- 示例：`idx_chat_messages_agent_id`, `idx_skill_calls_call_time`

### 4.4 约束命名

- 使用描述性名称，使用snake_case
- 示例：`fk_chat_messages_agent_id`, `uq_agent_states_agent_id`

## 5. 配置文件命名规范

### 5.1 JSON配置文件

- 使用kebab-case
- 示例：`agents.json`, `theme-config.json`, `app-settings.json`

### 5.2 环境变量

- 使用UPPER_SNAKE_CASE
- 示例：`API_BASE_URL`, `DATABASE_PATH`, `ENCRYPTION_KEY`

### 5.3 资源路径命名规范

**绝对路径**：
- 以`/`开头
- 示例：`/config/agents.json`, `/skills/`, `/data/`
- 使用场景：HTML/JavaScript中的资源引用

**相对路径**：
- 以`./`或`../`开头
- 示例：`./config/agents.json`, `../skills/`
- 使用场景：文件系统操作、模块导入

**重要注意事项**：
- 开发服务器在根目录启动时，优先使用绝对路径
- 避免使用`../`相对路径，容易因文件位置变化导致错误
- 路径大小写敏感（Linux/macOS）
- 路径分隔符使用`/`（跨平台兼容）

### 5.4 配置文件路径规范

**项目根目录**：`f:\AI软件\AutoMate`

**配置文件目录**：`./config/`

**配置文件路径**：
- 智能体配置：`./config/agents.json`
- 主题配置：`./config/theme.json`
- 应用设置：`./config/settings.json`

**开发服务器路径**：
- 服务器启动位置：项目根目录
- 访问路径：使用绝对路径（如`/config/agents.json`）
- 错误示例：在`prototypes/`目录启动服务器

## 6. 测试文件命名规范

### 6.1 测试文件

- 以`.test.ts`或`.spec.ts`结尾
- 示例：`AgentList.test.ts`, `ChatWindow.spec.ts`

### 6.2 测试函数

- 以`test_`开头，使用snake_case
- 示例：`test_load_agents`, `test_send_message`, `test_update_theme`

## 7. Git提交信息命名规范

### 7.1 提交信息格式

```
<type>(<scope>): <subject>

<body>

<footer>
```

### 7.2 类型（type）

- `feat`: 新功能
- `fix`: 修复bug
- `docs`: 文档更新
- `style`: 代码格式调整（不影响代码运行）
- `refactor`: 重构（既不是新增功能也不是修复bug）
- `perf`: 性能优化
- `test`: 测试相关
- `chore`: 构建过程或辅助工具的变动

### 7.3 示例

```
feat(agent): add agent search functionality

- Add search input component
- Implement search logic
- Add search result highlighting

Closes #123
```

## 8. 目录结构命名规范

### 8.1 目录命名

- 使用kebab-case
- 示例：`components`, `utils`, `services`, `hooks`

### 8.2 特殊目录

- `src`: 源代码目录
- `dist`: 构建输出目录
- `tests`: 测试目录
- `docs`: 文档目录
- `config`: 配置文件目录
- `assets`: 静态资源目录

## 9. 命名规范检查清单

在编写代码时，请检查以下项目：

- [ ] 文件命名是否符合规范
- [ ] 变量命名是否符合规范
- [ ] 函数命名是否符合规范
- [ ] 类命名是否符合规范
- [ ] 接口/类型命名是否符合规范
- [ ] 数据库表名和字段名是否符合规范
- [ ] API路由命名是否符合规范
- [ ] CSS类名是否符合规范
- [ ] 常量命名是否符合规范
- [ ] 命名是否清晰表达了其含义
- [ ] 命名是否与项目整体风格一致

## 10. 参考资源

- [React官方文档 - 命名规范](https://react.dev/learn/your-first-component)
- [TypeScript官方文档 - 命名规范](https://www.typescriptlang.org/docs/handbook/declaration-files/do-s-and-don-ts.html)
- [PEP 8 - Python代码风格指南](https://peps.python.org/pep-0008/)
- [SQL命名规范最佳实践](https://www.sqlstyle.guide/)
- [开发环境配置规范](./开发环境配置.md)
