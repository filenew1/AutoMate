# 主题模块

本文档定义了AutoMate项目中主题模块的详细设计。

## 1. 模块概述

### 1.1 模块功能

主题模块负责主题切换、样式适配、主题导入导出等功能。

### 1.2 参考原型

- [MainLayout.html](../../prototypes/MainLayout.html)

## 2. 功能流程

### 2.1 主题切换

**触发场景：** 用户点击主题切换按钮时

**处理流程：**

1. 识别用户的主题切换意图
2. 切换主题状态（浅色/深色）
3. 更新界面元素的样式和颜色
4. 保存主题偏好到本地存储
5. 更新主题切换按钮的图标

**错误处理：**

- 主题切换失败：显示错误提示并恢复到之前的主题

### 2.2 主题配置保存

**触发场景：** 用户修改主题设置时

**处理流程：**

1. 收集用户的主题设置
2. 验证设置的合法性
3. 构建主题配置对象
4. 序列化并保存到本地存储
5. 应用新的主题配置

**错误处理：**

- 配置保存失败：显示错误提示和重试选项
- 本地存储容量不足：显示清理建议

### 2.3 主题导入导出

**触发场景：** 用户导入或导出主题配置时

**处理流程：**

1. 验证文件路径和权限
2. 读取或写入主题配置文件
3. 验证配置格式的合法性
4. 应用导入的主题配置或保存导出的配置
5. 更新界面显示
6. 显示操作结果反馈

**错误处理：**

- 文件格式错误：显示格式错误提示和支持的格式
- 文件为空：显示"请选择有效文件"提示
- 路径无权限：显示权限错误提示

## 3. 视觉设计

### 3.1 主题切换按钮

- **位置**：位于左侧边栏底部设置区域
- **样式**：图标按钮，圆角，悬停时背景色变化
- **图标**：浅色主题显示太阳图标，深色主题显示月亮图标
- **尺寸**：图标大小16px，按钮尺寸32x32px

### 3.2 配色系统

**浅色主题：**

- 主色调：`#3b82f6`（蓝色）
- 辅助色：`#8b5cf6`（紫色）
- 文本颜色：主文本`#1f2937`，次要文本`#6b7280`
- 背景颜色：主背景`#ffffff`，次要背景`#f9fafb`
- 边框颜色：`#e5e7eb`

**深色主题：**

- 主色调：`#60a5fa`（亮蓝色）
- 辅助色：`#a78bfa`（亮紫色）
- 文本颜色：主文本`#f9fafb`，次要文本`#9ca3af`
- 背景颜色：主背景`#111827`，次要背景`#1f2937`
- 边框颜色：`#4b5563`

### 3.3 动画效果

- 主题切换：平滑过渡动画，所有界面元素颜色渐变
- 图标切换：太阳/月亮图标旋转动画
- 过渡时间：300ms

## 4. UI元素

### 4.1 主题切换按钮

- **位置**：左侧边栏底部设置区域
- **图标**：太阳/月亮SVG图标
- **尺寸**：图标16px × 16px，按钮32px × 32px
- **样式**：圆角，悬停时背景色变化

## 5. 数据存储

### 5.1 主题配置

- 主题配置以本地存储（localStorage）方式保存
- 无需数据库表

**存储方式：**

- 主题偏好设置
- 界面样式配置
- 用户自定义主题

## 6. 数据逻辑

### 6.1 主题切换逻辑

**触发场景：** 用户点击主题切换按钮时

**数据来源：** 用户的主题切换操作、当前主题状态

**处理流程：**

1. 识别用户的主题切换意图
2. 切换主题状态（浅色/深色）
3. 更新界面元素的样式和颜色
4. 保存主题偏好到本地存储
5. 更新主题切换按钮的图标

**数据去向：** 本地存储的主题偏好设置、界面元素的样式更新

**错误处理：**

- 主题切换失败：显示错误提示并恢复到之前的主题

### 6.2 主题配置保存逻辑

**触发场景：** 用户修改主题设置时

**数据来源：** 用户的主题设置输入、当前主题配置

**处理流程：**

1. 收集用户的主题设置
2. 验证设置的合法性
3. 构建主题配置对象
4. 序列化并保存到本地存储
5. 应用新的主题配置

**数据去向：** 本地存储的主题配置、界面元素的样式更新

**错误处理：**

- 配置保存失败：显示错误提示和重试选项
- 配置格式错误：使用默认配置并显示错误提示

## 7. 参考资源

- [Tailwind CSS深色模式文档](https://tailwindcss.com/docs/dark-mode)
- [CSS变量文档](https://developer.mozilla.org/en-US/docs/Web/CSS/Using_CSS_custom_properties)
