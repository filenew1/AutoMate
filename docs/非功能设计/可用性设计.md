# 可用性设计

本文档定义了AutoMate项目的可用性设计，包括界面易用性等。

## 1. 可用性目标

### 1.1 易用性原则

- **直观性**：界面直观易懂，符合用户习惯
- **一致性**：界面元素风格一致
- **反馈性**：操作有明确的反馈
- **容错性**：允许用户纠正错误
- **可访问性**：支持键盘导航和屏幕阅读器

### 1.2 可用性目标

| 目标 | 说明 |
| :--- | :--- |
| 界面简洁直观 | 遵循即时通讯软件使用习惯 |
| 响应流畅 | 确保界面操作的流畅性 |
| 错误提示友好 | 提供友好的错误提示和帮助信息 |
| 快捷键支持 | 支持常用操作的快捷键 |
| 操作引导完善 | 首次使用时提供操作引导 |

## 2. 界面设计

### 2.1 界面布局

**主界面布局：**

- 左侧：智能体列表（可收缩）
- 右侧：聊天窗口
- 顶部：智能体信息（头像、名称）
- 底部：消息输入框

**布局原则：**

- 遵循F型或Z型浏览模式
- 重要操作放在显眼位置
- 相关元素就近放置

### 2.2 视觉设计

**色彩对比：**

- 确保文本与背景有足够的对比度
- 遵循WCAG 2.1 AA级标准（对比度至少4.5:1）

**字体大小：**

- 正文：14px-16px
- 标题：18px-24px
- 辅助文本：12px-14px

**间距设计：**

- 元素间距：8px-16px
- 组件间距：16px-24px
- 区域间距：24px-32px

### 2.3 交互设计

**按钮设计：**

- 按钮尺寸：最小44px × 44px（触摸友好）
- 按钮间距：至少8px
- 按钮状态：正常、悬停、按下、禁用

**输入框设计：**

- 输入框高度：至少32px
- 输入框内边距：8px-12px
- 输入框边框：1px-2px
- 焦点状态：明显的视觉反馈

## 3. 操作流程

### 3.1 消息发送流程

**流程步骤：**

1. 用户在输入框输入消息
2. 点击发送按钮或按Enter键
3. 消息显示在聊天窗口
4. 显示发送状态（发送中、已发送、已读）
5. 智能体回复消息

**流程优化：**

- 输入框自动调整高度
- 发送按钮根据输入内容启用/禁用
- 消息发送失败时提供重试选项

### 3.2 智能体选择流程

**流程步骤：**

1. 用户在左侧列表选择智能体
2. 聊天窗口切换到选中的智能体
3. 加载该智能体的聊天记录
4. 显示欢迎信息或历史消息

**流程优化：**

- 选中状态有明显的视觉反馈
- 加载过程显示加载指示器
- 保存最后选中的智能体

### 3.3 文件上传流程

**流程步骤：**

1. 用户点击附件按钮
2. 选择文件
3. 文件上传到服务器
4. 显示上传进度
5. 上传完成后显示附件预览

**流程优化：**

- 支持拖拽上传
- 显示上传进度和预计时间
- 上传失败时提供重试选项

## 4. 快捷键设计

### 4.1 常用快捷键

| 快捷键 | 功能 | 说明 |
| :--- | :--- | :--- |
| Enter | 发送消息 | 在输入框中按Enter发送消息 |
| Shift + Enter | 换行 | 在输入框中换行 |
| Ctrl/Cmd + F | 搜索 | 聚焦搜索框 |
| Ctrl/Cmd + K | 快速选择 | 快速选择智能体 |
| Ctrl/Cmd + / | 命令 | 打开命令面板 |
| Esc | 关闭 | 关闭当前对话框或模态框 |
| Ctrl/Cmd + , | 设置 | 打开设置面板 |

### 4.2 快捷键实现

```typescript
// 快捷键处理
useEffect(() => {
  const handleKeyDown = (e: KeyboardEvent) => {
    // Ctrl/Cmd + Enter：发送消息
    if ((e.ctrlKey || e.metaKey) && e.key === 'Enter') {
      e.preventDefault();
      handleSendMessage();
    }

    // Ctrl/Cmd + F：搜索
    if ((e.ctrlKey || e.metaKey) && e.key === 'f') {
      e.preventDefault();
      focusSearchInput();
    }
  };

  window.addEventListener('keydown', handleKeyDown);
  return () => {
    window.removeEventListener('keydown', handleKeyDown);
  };
}, []);
```

## 5. 操作引导

### 5.1 首次使用引导

**引导步骤：**

1. 欢迎页面
2. 选择智能体
3. 发送第一条消息
4. 查看回复

**引导实现：**

```tsx
// 引导组件
const OnboardingGuide = () => {
  const [step, setStep] = useState(0);

  const steps = [
    { title: '欢迎', content: '欢迎使用AutoMate' },
    { title: '选择智能体', content: '从左侧列表选择一个智能体' },
    { title: '发送消息', content: '在输入框输入消息并按Enter发送' },
    { title: '开始对话', content: '开始与智能体对话' }
  ];

  return (
    <div className="onboarding-guide">
      <div className="step-indicator">
        {steps.map((s, i) => (
          <div key={i} className={`step ${i <= step ? 'active' : ''}`}>
            {i + 1}
          </div>
        ))}
      </div>
      <div className="step-content">
        <h2>{steps[step].title}</h2>
        <p>{steps[step].content}</p>
        {step < steps.length - 1 && (
          <button onClick={() => setStep(step + 1)}>下一步</button>
        )}
      </div>
    </div>
  );
};
```

### 5.2 功能提示

**工具提示（Tooltip）：**

```tsx
// 工具提示组件
const Tooltip = ({ children, content }) => {
  const [visible, setVisible] = useState(false);

  return (
    <div
      className="tooltip-container"
      onMouseEnter={() => setVisible(true)}
      onMouseLeave={() => setVisible(false)}
    >
      {children}
      {visible && <div className="tooltip">{content}</div>}
    </div>
  );
};
```

**上下文帮助：**

- 在相关操作旁显示帮助图标
- 点击帮助图标显示详细说明
- 提供视频教程链接（可选）

## 6. 错误处理

### 6.1 错误提示

**错误提示原则：**

- 使用通俗易懂的语言
- 避免技术术语
- 提供具体的解决建议
- 提供重试或返回选项

**错误提示示例：**

```tsx
// 错误提示组件
const ErrorMessage = ({ error, onRetry }) => {
  return (
    <div className="error-message">
      <div className="error-icon">⚠️</div>
      <div className="error-content">
        <h3>操作失败</h3>
        <p>{error.message}</p>
        {error.suggestion && (
          <p className="suggestion">建议：{error.suggestion}</p>
        )}
        {onRetry && (
          <button onClick={onRetry}>重试</button>
        )}
      </div>
    </div>
  );
};
```

### 6.2 表单验证

**实时验证：**

```tsx
// 表单验证示例
const FormInput = ({ value, onChange, label, validator }) => {
  const [error, setError] = useState('');

  const handleChange = (e) => {
    const newValue = e.target.value;
    onChange(newValue);

    const validationError = validator(newValue);
    setError(validationError);
  };

  return (
    <div className="form-input">
      <label>{label}</label>
      <input value={value} onChange={handleChange} />
      {error && <span className="error">{error}</span>}
    </div>
  );
};
```

## 7. 可访问性

### 7.1 键盘导航

**焦点管理：**

- Tab键顺序合理
- 焦点状态明显
- 支持Esc键关闭对话框

**焦点指示器：**

```css
/* 焦点样式 */
:focus {
  outline: 2px solid #3b82f6;
  outline-offset: 2px;
}
```

### 7.2 屏幕阅读器支持

**ARIA属性：**

```tsx
// ARIA属性示例
<button aria-label="发送消息" aria-describedby="send-help">
  发送
</button>
<span id="send-help">按Enter键发送消息</span>
```

**语义化HTML：**

```tsx
// 语义化HTML示例
<nav aria-label="智能体列表">
  <ul>
    <li><a href="#" aria-label="智能体1">智能体1</a></li>
  </ul>
</nav>
```

## 8. 可用性测试

### 8.1 可用性测试方法

**用户测试：**

- 招募真实用户进行测试
- 观察用户操作流程
- 收集用户反馈

**启发式评估：**

- 使用Nielsen的10个可用性启发式原则
- 识别界面可用性问题
- 提出改进建议

### 8.2 可用性测试指标

**任务完成率：**

- 用户完成任务的比例
- 目标：> 90%

**任务完成时间：**

- 用户完成任务的平均时间
- 目标：< 预期时间的1.5倍

**错误率：**

- 用户操作错误的频率
- 目标：< 10%

**用户满意度：**

- 用户对界面的满意度评分
- 目标：> 4/5

## 9. 可用性检查清单

在开发过程中，请检查以下项目：

- [ ] 界面布局符合用户习惯
- [ ] 色彩对比度符合WCAG标准
- [ ] 字体大小合适，易于阅读
- [ ] 按钮尺寸至少44px × 44px
- [ ] 所有操作都有明确的反馈
- [ ] 错误提示友好且具体
- [ ] 提供操作引导和帮助
- [ ] 支持键盘导航
- [ ] 支持屏幕阅读器
- [ ] 快捷键合理且易于记忆

## 10. 参考资源

- [WCAG 2.1指南](https://www.w3.org/WAI/WCAG21/quickref/)
- [Nielsen的10个可用性启发式原则](https://www.nngroup.com/articles/ten-usability-heuristics/)
- [Material Design指南](https://material.io/design)
